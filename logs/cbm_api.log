{"text": "2025-08-01 14:00:18.510 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:79 - [Redis] set details\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF942C0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF942C0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663DC80>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661EE0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661EE0>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661EE0>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661EE0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661EE0>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663D020>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026306660D60>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661F80>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x0000026306660D60>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663D020>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x0000026306670E30>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x0000026306670E30>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 77, in get_dashboard_fiche\n    await redis_client.set(key_details, json.dumps({\"products\": details}), ex=3600)\n          │            │   │            │    │                  └ [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', statut=0, cod_...\n          │            │   │            │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │            └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:products:465576'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n           └ <_json.Encoder object at 0x0000026306670D60>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', statut=0, cod_f...\n\nTypeError: Object of type ProductDetail is not JSON serializable\n", "record": {"elapsed": {"repr": "0:03:30.223198", "seconds": 210.223198}, "exception": {"type": "TypeError", "value": "Object of type ProductDetail is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 79, "message": "[Redis] set details", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:18.510681+02:00", "timestamp": 1754049618.510681}}}
{"text": "2025-08-01 14:00:18.526 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:03:30.238825", "seconds": 210.238825}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:18.526308+02:00", "timestamp": 1754049618.526308}}}
{"text": "2025-08-01 14:00:18.527 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:03:30.240300", "seconds": 210.2403}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:18.527783+02:00", "timestamp": 1754049618.527783}}}
{"text": "2025-08-01 14:00:18.528 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:03:30.241509", "seconds": 210.241509}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:18.528992+02:00", "timestamp": 1754049618.528992}}}
{"text": "2025-08-01 14:00:18.530 | DEBUG    | app.services.purchase.purchase_service:get_purchase_price:32 - ✅ Cache hit purchase_price pour purchase:price:465576\n", "record": {"elapsed": {"repr": "0:03:30.242548", "seconds": 210.242548}, "exception": null, "extra": {}, "file": {"name": "purchase_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\purchase\\purchase_service.py"}, "function": "get_purchase_price", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 32, "message": "✅ Cache hit purchase_price pour purchase:price:465576", "module": "purchase_service", "name": "app.services.purchase.purchase_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:18.530031+02:00", "timestamp": 1754049618.530031}}}
{"text": "2025-08-01 14:00:18.530 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:103 - [Redis] set purchase\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF942C0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF942C0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663DC80>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661EE0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661EE0>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661EE0>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661EE0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661EE0>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663D020>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026306660D60>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661F80>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96FC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x0000026306660D60>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663D020>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x0000026306670E30>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x0000026306670E30>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 101, in get_dashboard_fiche\n    await redis_client.set(key_purchase, json.dumps({\"items\": purchase}), ex=3600)\n          │            │   │             │    │               └ [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]\n          │            │   │             │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │             └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:purchase:465576'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n           └ <_json.Encoder object at 0x000002637F168D00>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)\n\nTypeError: Object of type ProductPurchasePrice is not JSON serializable\n", "record": {"elapsed": {"repr": "0:03:30.243359", "seconds": 210.243359}, "exception": {"type": "TypeError", "value": "Object of type ProductPurchasePrice is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 103, "message": "[Redis] set purchase", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:18.530842+02:00", "timestamp": 1754049618.530842}}}
{"text": "2025-08-01 14:00:18.560 | INFO     | app.main:request_tracking_middleware:116 - ✅ [8bf986c7] POST /api/v1/dashboard/fiche - 200 - 60.6ms\n", "record": {"elapsed": {"repr": "0:03:30.273505", "seconds": 210.273505}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [8bf986c7] POST /api/v1/dashboard/fiche - 200 - 60.6ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:18.560988+02:00", "timestamp": 1754049618.560988}}}
{"text": "2025-08-01 14:00:32.302 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [14f673d4] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:03:44.014602", "seconds": 224.014602}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [14f673d4] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:32.302085+02:00", "timestamp": 1754049632.302085}}}
{"text": "2025-08-01 14:00:32.486 | INFO     | app.main:request_tracking_middleware:116 - ✅ [14f673d4] GET /api/v1/suggestions/refint-codpro - 200 - 184.2ms\n", "record": {"elapsed": {"repr": "0:03:44.198729", "seconds": 224.198729}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [14f673d4] GET /api/v1/suggestions/refint-codpro - 200 - 184.2ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:32.486212+02:00", "timestamp": 1754049632.486212}}}
{"text": "2025-08-01 14:00:32.931 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [3540a0ce] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:03:44.643673", "seconds": 224.643673}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [3540a0ce] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:32.931156+02:00", "timestamp": 1754049632.931156}}}
{"text": "2025-08-01 14:00:33.096 | INFO     | app.main:request_tracking_middleware:116 - ✅ [3540a0ce] GET /api/v1/suggestions/refint-codpro - 200 - 165.4ms\n", "record": {"elapsed": {"repr": "0:03:44.809107", "seconds": 224.809107}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [3540a0ce] GET /api/v1/suggestions/refint-codpro - 200 - 165.4ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:33.096590+02:00", "timestamp": 1754049633.09659}}}
{"text": "2025-08-01 14:00:34.579 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [d00f6947] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:03:46.291971", "seconds": 226.291971}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [d00f6947] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:34.579454+02:00", "timestamp": 1754049634.579454}}}
{"text": "2025-08-01 14:00:34.584 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [8eb2bb18] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:03:46.297414", "seconds": 226.297414}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [8eb2bb18] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:34.584897+02:00", "timestamp": 1754049634.584897}}}
{"text": "2025-08-01 14:00:34.660 | INFO     | app.main:request_tracking_middleware:116 - ✅ [d00f6947] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 81.2ms\n", "record": {"elapsed": {"repr": "0:03:46.373181", "seconds": 226.373181}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [d00f6947] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 81.2ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:34.660664+02:00", "timestamp": 1754049634.660664}}}
{"text": "2025-08-01 14:00:34.681 | INFO     | app.main:request_tracking_middleware:116 - ✅ [8eb2bb18] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 96.9ms\n", "record": {"elapsed": {"repr": "0:03:46.394329", "seconds": 226.394329}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [8eb2bb18] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 96.9ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:34.681812+02:00", "timestamp": 1754049634.681812}}}
{"text": "2025-08-01 14:00:34.772 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [92874515] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:03:46.485414", "seconds": 226.485414}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [92874515] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:34.772897+02:00", "timestamp": 1754049634.772897}}}
{"text": "2025-08-01 14:00:34.959 | INFO     | app.main:request_tracking_middleware:116 - ✅ [92874515] GET /api/v1/suggestions/refint-codpro - 200 - 186.4ms\n", "record": {"elapsed": {"repr": "0:03:46.671822", "seconds": 226.671822}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [92874515] GET /api/v1/suggestions/refint-codpro - 200 - 186.4ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:34.959305+02:00", "timestamp": 1754049634.959305}}}
{"text": "2025-08-01 14:00:38.398 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [f5f87f4b] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:03:50.111115", "seconds": 230.111115}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [f5f87f4b] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.398598+02:00", "timestamp": 1754049638.398598}}}
{"text": "2025-08-01 14:00:38.405 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:101 - ✅ Cache enregistré pour 1 cod_pro\n", "record": {"elapsed": {"repr": "0:03:50.118327", "seconds": 230.118327}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 101, "message": "✅ Cache enregistré pour 1 cod_pro", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.405810+02:00", "timestamp": 1754049638.40581}}}
{"text": "2025-08-01 14:00:38.412 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:e316fbe2183ea4cf3769c70a72ff40a0\n", "record": {"elapsed": {"repr": "0:03:50.124835", "seconds": 230.124835}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:e316fbe2183ea4cf3769c70a72ff40a0", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.412318+02:00", "timestamp": 1754049638.412318}}}
{"text": "2025-08-01 14:00:38.413 | DEBUG    | app.services.products.detail_service:get_product_details:35 - ✅ Cache hit produit:details pour produit:details:20980\n", "record": {"elapsed": {"repr": "0:03:50.125943", "seconds": 230.125943}, "exception": null, "extra": {}, "file": {"name": "detail_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\products\\detail_service.py"}, "function": "get_product_details", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 35, "message": "✅ Cache hit produit:details pour produit:details:20980", "module": "detail_service", "name": "app.services.products.detail_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.413426+02:00", "timestamp": 1754049638.413426}}}
{"text": "2025-08-01 14:00:38.413 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:79 - [Redis] set details\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF96CA0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF96CA0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663F120>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663EFC0>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF967A0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF97560>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF967A0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663EFC0>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002637FEF4EF0>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002637FEF4EF0>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 77, in get_dashboard_fiche\n    await redis_client.set(key_details, json.dumps({\"products\": details}), ex=3600)\n          │            │   │            │    │                  └ [ProductDetail(cod_pro=20980, refint='D5022304', ref_ext='026850612', famille=8, s_famille=10, qualite='PMQ', statut=0, cod_f...\n          │            │   │            │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │            └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:products:20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'products': [ProductDetail(cod_pro=20980, refint='D5022304', ref_ext='026850612', famille=8, s_famille=10, qualite='PMQ', st...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'products': [ProductDetail(cod_pro=20980, refint='D5022304', ref_ext='026850612', famille=8, s_famille=10, qualite='PMQ', st...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'products': [ProductDetail(cod_pro=20980, refint='D5022304', ref_ext='026850612', famille=8, s_famille=10, qualite='PMQ', st...\n           └ <_json.Encoder object at 0x000002630662DD20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductDetail(cod_pro=20980, refint='D5022304', ref_ext='026850612', famille=8, s_famille=10, qualite='PMQ', statut=0, cod_fo...\n\nTypeError: Object of type ProductDetail is not JSON serializable\n", "record": {"elapsed": {"repr": "0:03:50.126482", "seconds": 230.126482}, "exception": {"type": "TypeError", "value": "Object of type ProductDetail is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 79, "message": "[Redis] set details", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.413965+02:00", "timestamp": 1754049638.413965}}}
{"text": "2025-08-01 14:00:38.427 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:e316fbe2183ea4cf3769c70a72ff40a0\n", "record": {"elapsed": {"repr": "0:03:50.139576", "seconds": 230.139576}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:e316fbe2183ea4cf3769c70a72ff40a0", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.427059+02:00", "timestamp": 1754049638.427059}}}
{"text": "2025-08-01 14:00:38.428 | DEBUG    | app.services.sales.sales_service:get_sales_aggregate:34 - ✅ Cache hit sales:agg pour sales:agg:20980\n", "record": {"elapsed": {"repr": "0:03:50.140737", "seconds": 230.140737}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_aggregate", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 34, "message": "✅ Cache hit sales:agg pour sales:agg:20980", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.428220+02:00", "timestamp": 1754049638.42822}}}
{"text": "2025-08-01 14:00:38.428 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:86 - [Redis] set sales\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF96CA0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF96CA0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663F120>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663EFC0>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF967A0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF97560>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF967A0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663EFC0>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002637FEF4EF0>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002637FEF4EF0>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 84, in get_dashboard_fiche\n    await redis_client.set(key_sales, json.dumps({\"items\": sales}), ex=3600)\n          │            │   │          │    │               └ [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, marge_perce...\n          │            │   │          │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │          └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:sales:20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, m...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, m...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, m...\n           └ <_json.Encoder object at 0x000002630662E740>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, marge_percen...\n\nTypeError: Object of type ProductSalesAggregate is not JSON serializable\n", "record": {"elapsed": {"repr": "0:03:50.141152", "seconds": 230.141152}, "exception": {"type": "TypeError", "value": "Object of type ProductSalesAggregate is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 86, "message": "[Redis] set sales", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.428635+02:00", "timestamp": 1754049638.428635}}}
{"text": "2025-08-01 14:00:38.443 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:e316fbe2183ea4cf3769c70a72ff40a0\n", "record": {"elapsed": {"repr": "0:03:50.156434", "seconds": 230.156434}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:e316fbe2183ea4cf3769c70a72ff40a0", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.443917+02:00", "timestamp": 1754049638.443917}}}
{"text": "2025-08-01 14:00:38.444 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [20980], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:03:50.157343", "seconds": 230.157343}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [20980], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.444826+02:00", "timestamp": 1754049638.444826}}}
{"text": "2025-08-01 14:00:38.446 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:e316fbe2183ea4cf3769c70a72ff40a0\n", "record": {"elapsed": {"repr": "0:03:50.158782", "seconds": 230.158782}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:e316fbe2183ea4cf3769c70a72ff40a0", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.446265+02:00", "timestamp": 1754049638.446265}}}
{"text": "2025-08-01 14:00:38.447 | DEBUG    | app.services.stock.stock_service:get_stock_actuel:30 - ✅ Cache hit stock:actuel pour stock:actuel:20980\n", "record": {"elapsed": {"repr": "0:03:50.159716", "seconds": 230.159716}, "exception": null, "extra": {}, "file": {"name": "stock_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\stock\\stock_service.py"}, "function": "get_stock_actuel", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 30, "message": "✅ Cache hit stock:actuel pour stock:actuel:20980", "module": "stock_service", "name": "app.services.stock.stock_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.447199+02:00", "timestamp": 1754049638.447199}}}
{"text": "2025-08-01 14:00:38.447 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:96 - [Redis] set stock\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF96CA0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF96CA0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663F120>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663EFC0>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF967A0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF97560>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF967A0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663EFC0>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002637FEF4EF0>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002637FEF4EF0>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 94, in get_dashboard_fiche\n    await redis_client.set(key_stock, json.dumps({\"items\": stock}), ex=3600)\n          │            │   │          │    │               └ [ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88), ProductStock(cod_pro=20980, depot=31, stock=0.0, pmp=3.6), Produc...\n          │            │   │          │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │          └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:stock:20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88), ProductStock(cod_pro=20980, depot=31, stock=0.0, pmp=3....\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88), ProductStock(cod_pro=20980, depot=31, stock=0.0, pmp=3....\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88), ProductStock(cod_pro=20980, depot=31, stock=0.0, pmp=3....\n           └ <_json.Encoder object at 0x000002637FEF4B80>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88)\n\nTypeError: Object of type ProductStock is not JSON serializable\n", "record": {"elapsed": {"repr": "0:03:50.160430", "seconds": 230.16043}, "exception": {"type": "TypeError", "value": "Object of type ProductStock is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 96, "message": "[Redis] set stock", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.447913+02:00", "timestamp": 1754049638.447913}}}
{"text": "2025-08-01 14:00:38.481 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:e316fbe2183ea4cf3769c70a72ff40a0\n", "record": {"elapsed": {"repr": "0:03:50.193689", "seconds": 230.193689}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:e316fbe2183ea4cf3769c70a72ff40a0", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.481172+02:00", "timestamp": 1754049638.481172}}}
{"text": "2025-08-01 14:00:38.482 | DEBUG    | app.services.purchase.purchase_service:get_purchase_price:32 - ✅ Cache hit purchase_price pour purchase:price:20980\n", "record": {"elapsed": {"repr": "0:03:50.194919", "seconds": 230.194919}, "exception": null, "extra": {}, "file": {"name": "purchase_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\purchase\\purchase_service.py"}, "function": "get_purchase_price", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 32, "message": "✅ Cache hit purchase_price pour purchase:price:20980", "module": "purchase_service", "name": "app.services.purchase.purchase_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.482402+02:00", "timestamp": 1754049638.482402}}}
{"text": "2025-08-01 14:00:38.483 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:103 - [Redis] set purchase\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF96CA0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF96CA0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF974D0>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663F120>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF979C0>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663EFC0>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF967A0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF97560>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF96D40>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF967A0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663EFC0>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002637FEF4EF0>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002637FEF4EF0>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 101, in get_dashboard_fiche\n    await redis_client.set(key_purchase, json.dumps({\"items\": purchase}), ex=3600)\n          │            │   │             │    │               └ [ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]\n          │            │   │             │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │             └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:purchase:20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]}\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]}\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]}\n           └ <_json.Encoder object at 0x000002637FEF4B80>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)\n\nTypeError: Object of type ProductPurchasePrice is not JSON serializable\n", "record": {"elapsed": {"repr": "0:03:50.195814", "seconds": 230.195814}, "exception": {"type": "TypeError", "value": "Object of type ProductPurchasePrice is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 103, "message": "[Redis] set purchase", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.483297+02:00", "timestamp": 1754049638.483297}}}
{"text": "2025-08-01 14:00:38.501 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [a5167c2b] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:03:50.214083", "seconds": 230.214083}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [a5167c2b] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.501566+02:00", "timestamp": 1754049638.501566}}}
{"text": "2025-08-01 14:00:38.502 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:101 - ✅ Cache enregistré pour 1 cod_pro\n", "record": {"elapsed": {"repr": "0:03:50.214882", "seconds": 230.214882}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 101, "message": "✅ Cache enregistré pour 1 cod_pro", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.502365+02:00", "timestamp": 1754049638.502365}}}
{"text": "2025-08-01 14:00:38.506 | INFO     | app.main:request_tracking_middleware:116 - ✅ [a5167c2b] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 4.4ms\n", "record": {"elapsed": {"repr": "0:03:50.218586", "seconds": 230.218586}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [a5167c2b] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 4.4ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.506069+02:00", "timestamp": 1754049638.506069}}}
{"text": "2025-08-01 14:00:38.587 | DEBUG    | app.services.products.match_service:get_codpro_match_list:63 - ✅ Matches récupérés: 4 éléments uniques\n", "record": {"elapsed": {"repr": "0:03:50.300012", "seconds": 230.300012}, "exception": null, "extra": {}, "file": {"name": "match_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\products\\match_service.py"}, "function": "get_codpro_match_list", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 63, "message": "✅ Matches récupérés: 4 éléments uniques", "module": "match_service", "name": "app.services.products.match_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.587495+02:00", "timestamp": 1754049638.587495}}}
{"text": "2025-08-01 14:00:38.591 | INFO     | app.main:request_tracking_middleware:116 - ✅ [f5f87f4b] POST /api/v1/dashboard/fiche - 200 - 193.1ms\n", "record": {"elapsed": {"repr": "0:03:50.304165", "seconds": 230.304165}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [f5f87f4b] POST /api/v1/dashboard/fiche - 200 - 193.1ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:38.591648+02:00", "timestamp": 1754049638.591648}}}
{"text": "2025-08-01 14:00:39.451 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [0cae884b] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:03:51.164246", "seconds": 231.164246}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [0cae884b] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:39.451729+02:00", "timestamp": 1754049639.451729}}}
{"text": "2025-08-01 14:00:39.802 | INFO     | app.main:request_tracking_middleware:116 - ✅ [0cae884b] GET /api/v1/suggestions/refint-codpro - 200 - 351.1ms\n", "record": {"elapsed": {"repr": "0:03:51.515286", "seconds": 231.515286}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [0cae884b] GET /api/v1/suggestions/refint-codpro - 200 - 351.1ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:39.802769+02:00", "timestamp": 1754049639.802769}}}
{"text": "2025-08-01 14:00:42.674 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [e8ce6b37] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:03:54.387069", "seconds": 234.387069}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [e8ce6b37] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.674552+02:00", "timestamp": 1754049642.674552}}}
{"text": "2025-08-01 14:00:42.679 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:03:54.392457", "seconds": 234.392457}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.679940+02:00", "timestamp": 1754049642.67994}}}
{"text": "2025-08-01 14:00:42.682 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:55 - ✅ Cache hit dashboard:sales\n", "record": {"elapsed": {"repr": "0:03:54.394519", "seconds": 234.394519}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 55, "message": "✅ Cache hit dashboard:sales", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.682002+02:00", "timestamp": 1754049642.682002}}}
{"text": "2025-08-01 14:00:42.683 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:59 - ✅ Cache hit dashboard:stock\n", "record": {"elapsed": {"repr": "0:03:54.395798", "seconds": 234.395798}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 59, "message": "✅ Cache hit dashboard:stock", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.683281+02:00", "timestamp": 1754049642.683281}}}
{"text": "2025-08-01 14:00:42.684 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:67 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:03:54.397359", "seconds": 234.397359}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 67, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.684842+02:00", "timestamp": 1754049642.684842}}}
{"text": "2025-08-01 14:00:42.686 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:03:54.398908", "seconds": 234.398908}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.686391+02:00", "timestamp": 1754049642.686391}}}
{"text": "2025-08-01 14:00:42.687 | DEBUG    | app.services.products.detail_service:get_product_details:35 - ✅ Cache hit produit:details pour produit:details:465576\n", "record": {"elapsed": {"repr": "0:03:54.400119", "seconds": 234.400119}, "exception": null, "extra": {}, "file": {"name": "detail_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\products\\detail_service.py"}, "function": "get_product_details", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 35, "message": "✅ Cache hit produit:details pour produit:details:465576", "module": "detail_service", "name": "app.services.products.detail_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.687602+02:00", "timestamp": 1754049642.687602}}}
{"text": "2025-08-01 14:00:42.688 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:79 - [Redis] set details\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF974C0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF974C0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF97570>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF97570>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF97570>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF97570>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663FC20>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85BC0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85BC0>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85BC0>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85BC0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85BC0>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663D860>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF87E20>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85260>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF87E20>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663D860>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002630662E5D0>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002630662E5D0>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 77, in get_dashboard_fiche\n    await redis_client.set(key_details, json.dumps({\"products\": details}), ex=3600)\n          │            │   │            │    │                  └ [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', statut=0, cod_...\n          │            │   │            │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │            └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:products:465576'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n           └ <_json.Encoder object at 0x000002630662E9E0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', statut=0, cod_f...\n\nTypeError: Object of type ProductDetail is not JSON serializable\n", "record": {"elapsed": {"repr": "0:03:54.400791", "seconds": 234.400791}, "exception": {"type": "TypeError", "value": "Object of type ProductDetail is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 79, "message": "[Redis] set details", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.688274+02:00", "timestamp": 1754049642.688274}}}
{"text": "2025-08-01 14:00:42.714 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:03:54.427021", "seconds": 234.427021}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.714504+02:00", "timestamp": 1754049642.714504}}}
{"text": "2025-08-01 14:00:42.715 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:03:54.428264", "seconds": 234.428264}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.715747+02:00", "timestamp": 1754049642.715747}}}
{"text": "2025-08-01 14:00:42.717 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:03:54.429706", "seconds": 234.429706}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.717189+02:00", "timestamp": 1754049642.717189}}}
{"text": "2025-08-01 14:00:42.719 | DEBUG    | app.services.purchase.purchase_service:get_purchase_price:32 - ✅ Cache hit purchase_price pour purchase:price:465576\n", "record": {"elapsed": {"repr": "0:03:54.431953", "seconds": 234.431953}, "exception": null, "extra": {}, "file": {"name": "purchase_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\purchase\\purchase_service.py"}, "function": "get_purchase_price", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 32, "message": "✅ Cache hit purchase_price pour purchase:price:465576", "module": "purchase_service", "name": "app.services.purchase.purchase_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.719436+02:00", "timestamp": 1754049642.719436}}}
{"text": "2025-08-01 14:00:42.723 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:103 - [Redis] set purchase\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF974C0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF974C0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF97570>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF97570>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF97570>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF97570>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663FC20>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85BC0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85BC0>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85BC0>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85BC0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85BC0>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663D860>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF87E20>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85260>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF979C0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF87E20>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663D860>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002630662E5D0>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002630662E5D0>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 101, in get_dashboard_fiche\n    await redis_client.set(key_purchase, json.dumps({\"items\": purchase}), ex=3600)\n          │            │   │             │    │               └ [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]\n          │            │   │             │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │             └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:purchase:465576'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n           └ <_json.Encoder object at 0x000002630662E9E0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)\n\nTypeError: Object of type ProductPurchasePrice is not JSON serializable\n", "record": {"elapsed": {"repr": "0:03:54.435890", "seconds": 234.43589}, "exception": {"type": "TypeError", "value": "Object of type ProductPurchasePrice is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 103, "message": "[Redis] set purchase", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.723373+02:00", "timestamp": 1754049642.723373}}}
{"text": "2025-08-01 14:00:42.751 | INFO     | app.main:request_tracking_middleware:116 - ✅ [e8ce6b37] POST /api/v1/dashboard/fiche - 200 - 77.3ms\n", "record": {"elapsed": {"repr": "0:03:54.464384", "seconds": 234.464384}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [e8ce6b37] POST /api/v1/dashboard/fiche - 200 - 77.3ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:42.751867+02:00", "timestamp": 1754049642.751867}}}
{"text": "2025-08-01 14:00:48.014 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [ffd1f411] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:03:59.727100", "seconds": 239.7271}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [ffd1f411] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.014583+02:00", "timestamp": 1754049648.014583}}}
{"text": "2025-08-01 14:00:48.032 | INFO     | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:78 - 📌 Résolution via grouping_crn=13, qualite=PMQ\n", "record": {"elapsed": {"repr": "0:03:59.744897", "seconds": 239.744897}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 78, "message": "📌 Résolution via grouping_crn=13, qualite=PMQ", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.032380+02:00", "timestamp": 1754049648.03238}}}
{"text": "2025-08-01 14:00:48.042 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:101 - ✅ Cache enregistré pour 2 cod_pro\n", "record": {"elapsed": {"repr": "0:03:59.755310", "seconds": 239.75531}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 101, "message": "✅ Cache enregistré pour 2 cod_pro", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.042793+02:00", "timestamp": 1754049648.042793}}}
{"text": "2025-08-01 14:00:48.045 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:67 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:03:59.757745", "seconds": 239.757745}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 67, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.045228+02:00", "timestamp": 1754049648.045228}}}
{"text": "2025-08-01 14:00:48.046 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:03:59.758964", "seconds": 239.758964}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.046447+02:00", "timestamp": 1754049648.046447}}}
{"text": "2025-08-01 14:00:48.047 | DEBUG    | app.services.products.detail_service:get_product_details:35 - ✅ Cache hit produit:details pour produit:details:700,20980\n", "record": {"elapsed": {"repr": "0:03:59.760268", "seconds": 239.760268}, "exception": null, "extra": {}, "file": {"name": "detail_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\products\\detail_service.py"}, "function": "get_product_details", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 35, "message": "✅ Cache hit produit:details pour produit:details:700,20980", "module": "detail_service", "name": "app.services.products.detail_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.047751+02:00", "timestamp": 1754049648.047751}}}
{"text": "2025-08-01 14:00:48.048 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:79 - [Redis] set details\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF97560>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF97560>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663DA70>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663DD30>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF85BC0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF863E0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF85BC0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663DD30>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002630662DF10>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002630662DF10>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 77, in get_dashboard_fiche\n    await redis_client.set(key_details, json.dumps({\"products\": details}), ex=3600)\n          │            │   │            │    │                  └ [ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', statut=0, cod_fo...\n          │            │   │            │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │            └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:products:700,20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'products': [ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', sta...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'products': [ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', sta...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'products': [ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', sta...\n           └ <_json.Encoder object at 0x000002630662E9E0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', statut=0, cod_fou...\n\nTypeError: Object of type ProductDetail is not JSON serializable\n", "record": {"elapsed": {"repr": "0:03:59.760808", "seconds": 239.760808}, "exception": {"type": "TypeError", "value": "Object of type ProductDetail is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 79, "message": "[Redis] set details", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.048291+02:00", "timestamp": 1754049648.048291}}}
{"text": "2025-08-01 14:00:48.066 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:03:59.778693", "seconds": 239.778693}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.066176+02:00", "timestamp": 1754049648.066176}}}
{"text": "2025-08-01 14:00:48.067 | DEBUG    | app.services.sales.sales_service:get_sales_aggregate:34 - ✅ Cache hit sales:agg pour sales:agg:700,20980\n", "record": {"elapsed": {"repr": "0:03:59.779896", "seconds": 239.779896}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_aggregate", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 34, "message": "✅ Cache hit sales:agg pour sales:agg:700,20980", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.067379+02:00", "timestamp": 1754049648.067379}}}
{"text": "2025-08-01 14:00:48.067 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:86 - [Redis] set sales\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF97560>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF97560>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663DA70>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663DD30>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF85BC0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF863E0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF85BC0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663DD30>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002630662DF10>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002630662DF10>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 84, in get_dashboard_fiche\n    await redis_client.set(key_sales, json.dumps({\"items\": sales}), ex=3600)\n          │            │   │          │    │               └ [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, marge_perce...\n          │            │   │          │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │          └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:sales:700,20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, m...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, m...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, m...\n           └ <_json.Encoder object at 0x000002630662D9C0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, marge_percen...\n\nTypeError: Object of type ProductSalesAggregate is not JSON serializable\n", "record": {"elapsed": {"repr": "0:03:59.780473", "seconds": 239.780473}, "exception": {"type": "TypeError", "value": "Object of type ProductSalesAggregate is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 86, "message": "[Redis] set sales", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.067956+02:00", "timestamp": 1754049648.067956}}}
{"text": "2025-08-01 14:00:48.096 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:03:59.809367", "seconds": 239.809367}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.096850+02:00", "timestamp": 1754049648.09685}}}
{"text": "2025-08-01 14:00:48.097 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:03:59.810508", "seconds": 239.810508}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.097991+02:00", "timestamp": 1754049648.097991}}}
{"text": "2025-08-01 14:00:48.099 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:03:59.811830", "seconds": 239.81183}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.099313+02:00", "timestamp": 1754049648.099313}}}
{"text": "2025-08-01 14:00:48.100 | DEBUG    | app.services.stock.stock_service:get_stock_actuel:30 - ✅ Cache hit stock:actuel pour stock:actuel:700,20980\n", "record": {"elapsed": {"repr": "0:03:59.812786", "seconds": 239.812786}, "exception": null, "extra": {}, "file": {"name": "stock_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\stock\\stock_service.py"}, "function": "get_stock_actuel", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 30, "message": "✅ Cache hit stock:actuel pour stock:actuel:700,20980", "module": "stock_service", "name": "app.services.stock.stock_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.100269+02:00", "timestamp": 1754049648.100269}}}
{"text": "2025-08-01 14:00:48.100 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:96 - [Redis] set stock\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF97560>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF97560>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663DA70>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663DD30>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF85BC0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF863E0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF85BC0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663DD30>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002630662DF10>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002630662DF10>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 94, in get_dashboard_fiche\n    await redis_client.set(key_stock, json.dumps({\"items\": stock}), ex=3600)\n          │            │   │          │    │               └ [ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91), ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88), Product...\n          │            │   │          │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │          └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:stock:700,20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91), ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91), ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91), ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88...\n           └ <_json.Encoder object at 0x000002630662E200>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91)\n\nTypeError: Object of type ProductStock is not JSON serializable\n", "record": {"elapsed": {"repr": "0:03:59.813368", "seconds": 239.813368}, "exception": {"type": "TypeError", "value": "Object of type ProductStock is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 96, "message": "[Redis] set stock", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.100851+02:00", "timestamp": 1754049648.100851}}}
{"text": "2025-08-01 14:00:48.138 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:03:59.851274", "seconds": 239.851274}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.138757+02:00", "timestamp": 1754049648.138757}}}
{"text": "2025-08-01 14:00:48.139 | DEBUG    | app.services.purchase.purchase_service:get_purchase_price:32 - ✅ Cache hit purchase_price pour purchase:price:700,20980\n", "record": {"elapsed": {"repr": "0:03:59.852438", "seconds": 239.852438}, "exception": null, "extra": {}, "file": {"name": "purchase_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\purchase\\purchase_service.py"}, "function": "get_purchase_price", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 32, "message": "✅ Cache hit purchase_price pour purchase:price:700,20980", "module": "purchase_service", "name": "app.services.purchase.purchase_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.139921+02:00", "timestamp": 1754049648.139921}}}
{"text": "2025-08-01 14:00:48.140 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:103 - [Redis] set purchase\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF97560>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF97560>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF85450>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663DA70>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF85A80>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663DD30>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF85BC0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x000002637FF863E0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF974C0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x000002637FF85BC0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663DD30>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002630662DF10>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002630662DF10>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 101, in get_dashboard_fiche\n    await redis_client.set(key_purchase, json.dumps({\"items\": purchase}), ex=3600)\n          │            │   │             │    │               └ [ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8), ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]\n          │            │   │             │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │             └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:purchase:700,20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8), ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]}\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8), ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]}\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8), ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]}\n           └ <_json.Encoder object at 0x000002630662FCA0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8)\n\nTypeError: Object of type ProductPurchasePrice is not JSON serializable\n", "record": {"elapsed": {"repr": "0:03:59.853046", "seconds": 239.853046}, "exception": {"type": "TypeError", "value": "Object of type ProductPurchasePrice is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 103, "message": "[Redis] set purchase", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.140529+02:00", "timestamp": 1754049648.140529}}}
{"text": "2025-08-01 14:00:48.205 | INFO     | app.main:request_tracking_middleware:116 - ✅ [ffd1f411] POST /api/v1/dashboard/fiche - 200 - 190.5ms\n", "record": {"elapsed": {"repr": "0:03:59.917573", "seconds": 239.917573}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [ffd1f411] POST /api/v1/dashboard/fiche - 200 - 190.5ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:48.205056+02:00", "timestamp": 1754049648.205056}}}
{"text": "2025-08-01 14:00:55.611 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [5c9dbf9e] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:04:07.324300", "seconds": 247.3243}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [5c9dbf9e] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.611783+02:00", "timestamp": 1754049655.611783}}}
{"text": "2025-08-01 14:00:55.631 | INFO     | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:78 - 📌 Résolution via grouping_crn=13, qualite=OE\n", "record": {"elapsed": {"repr": "0:04:07.343851", "seconds": 247.343851}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 78, "message": "📌 Résolution via grouping_crn=13, qualite=OE", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.631334+02:00", "timestamp": 1754049655.631334}}}
{"text": "2025-08-01 14:00:55.639 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:101 - ✅ Cache enregistré pour 1 cod_pro\n", "record": {"elapsed": {"repr": "0:04:07.352240", "seconds": 247.35224}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 101, "message": "✅ Cache enregistré pour 1 cod_pro", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.639723+02:00", "timestamp": 1754049655.639723}}}
{"text": "2025-08-01 14:00:55.641 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:55 - ✅ Cache hit dashboard:sales\n", "record": {"elapsed": {"repr": "0:04:07.353649", "seconds": 247.353649}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 55, "message": "✅ Cache hit dashboard:sales", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.641132+02:00", "timestamp": 1754049655.641132}}}
{"text": "2025-08-01 14:00:55.641 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:59 - ✅ Cache hit dashboard:stock\n", "record": {"elapsed": {"repr": "0:04:07.354503", "seconds": 247.354503}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 59, "message": "✅ Cache hit dashboard:stock", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.641986+02:00", "timestamp": 1754049655.641986}}}
{"text": "2025-08-01 14:00:55.643 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:67 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:04:07.356247", "seconds": 247.356247}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 67, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.643730+02:00", "timestamp": 1754049655.64373}}}
{"text": "2025-08-01 14:00:55.644 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:04:07.357482", "seconds": 247.357482}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.644965+02:00", "timestamp": 1754049655.644965}}}
{"text": "2025-08-01 14:00:55.646 | DEBUG    | app.services.products.detail_service:get_product_details:35 - ✅ Cache hit produit:details pour produit:details:465576\n", "record": {"elapsed": {"repr": "0:04:07.358922", "seconds": 247.358922}, "exception": null, "extra": {}, "file": {"name": "detail_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\products\\detail_service.py"}, "function": "get_product_details", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 35, "message": "✅ Cache hit produit:details pour produit:details:465576", "module": "detail_service", "name": "app.services.products.detail_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.646405+02:00", "timestamp": 1754049655.646405}}}
{"text": "2025-08-01 14:00:55.647 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:79 - [Redis] set details\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF85440>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF85440>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF87E30>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF87E30>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF87E30>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF87E30>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663C520>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663E620>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026306660AE0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662840>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x0000026306660AE0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663E620>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002630662DE50>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002630662DE50>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 77, in get_dashboard_fiche\n    await redis_client.set(key_details, json.dumps({\"products\": details}), ex=3600)\n          │            │   │            │    │                  └ [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', statut=0, cod_...\n          │            │   │            │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │            └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:products:465576'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n           └ <_json.Encoder object at 0x000002630662DA80>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', statut=0, cod_f...\n\nTypeError: Object of type ProductDetail is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:07.359587", "seconds": 247.359587}, "exception": {"type": "TypeError", "value": "Object of type ProductDetail is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 79, "message": "[Redis] set details", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.647070+02:00", "timestamp": 1754049655.64707}}}
{"text": "2025-08-01 14:00:55.658 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:04:07.370542", "seconds": 247.370542}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.658025+02:00", "timestamp": 1754049655.658025}}}
{"text": "2025-08-01 14:00:55.659 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:04:07.371673", "seconds": 247.371673}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.659156+02:00", "timestamp": 1754049655.659156}}}
{"text": "2025-08-01 14:00:55.660 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:04:07.372931", "seconds": 247.372931}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.660414+02:00", "timestamp": 1754049655.660414}}}
{"text": "2025-08-01 14:00:55.661 | DEBUG    | app.services.purchase.purchase_service:get_purchase_price:32 - ✅ Cache hit purchase_price pour purchase:price:465576\n", "record": {"elapsed": {"repr": "0:04:07.373915", "seconds": 247.373915}, "exception": null, "extra": {}, "file": {"name": "purchase_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\purchase\\purchase_service.py"}, "function": "get_purchase_price", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 32, "message": "✅ Cache hit purchase_price pour purchase:price:465576", "module": "purchase_service", "name": "app.services.purchase.purchase_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.661398+02:00", "timestamp": 1754049655.661398}}}
{"text": "2025-08-01 14:00:55.661 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:103 - [Redis] set purchase\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF85440>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF85440>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF87E30>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF87E30>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF87E30>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF87E30>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002630663C520>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002630663E620>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026306660AE0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662840>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF859E0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x0000026306660AE0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002630663E620>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002630662DE50>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002630662DE50>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 101, in get_dashboard_fiche\n    await redis_client.set(key_purchase, json.dumps({\"items\": purchase}), ex=3600)\n          │            │   │             │    │               └ [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]\n          │            │   │             │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │             └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:purchase:465576'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n           └ <_json.Encoder object at 0x000002630662E380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)\n\nTypeError: Object of type ProductPurchasePrice is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:07.374270", "seconds": 247.37427}, "exception": {"type": "TypeError", "value": "Object of type ProductPurchasePrice is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 103, "message": "[Redis] set purchase", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.661753+02:00", "timestamp": 1754049655.661753}}}
{"text": "2025-08-01 14:00:55.690 | INFO     | app.main:request_tracking_middleware:116 - ✅ [5c9dbf9e] POST /api/v1/dashboard/fiche - 200 - 78.3ms\n", "record": {"elapsed": {"repr": "0:04:07.402617", "seconds": 247.402617}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [5c9dbf9e] POST /api/v1/dashboard/fiche - 200 - 78.3ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:00:55.690100+02:00", "timestamp": 1754049655.6901}}}
{"text": "2025-08-01 14:01:00.304 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [e9a36110] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:04:12.016897", "seconds": 252.016897}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [e9a36110] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.304380+02:00", "timestamp": 1754049660.30438}}}
{"text": "2025-08-01 14:01:00.307 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:04:12.020398", "seconds": 252.020398}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.307881+02:00", "timestamp": 1754049660.307881}}}
{"text": "2025-08-01 14:01:00.309 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:55 - ✅ Cache hit dashboard:sales\n", "record": {"elapsed": {"repr": "0:04:12.022104", "seconds": 252.022104}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 55, "message": "✅ Cache hit dashboard:sales", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.309587+02:00", "timestamp": 1754049660.309587}}}
{"text": "2025-08-01 14:01:00.310 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:59 - ✅ Cache hit dashboard:stock\n", "record": {"elapsed": {"repr": "0:04:12.023088", "seconds": 252.023088}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 59, "message": "✅ Cache hit dashboard:stock", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.310571+02:00", "timestamp": 1754049660.310571}}}
{"text": "2025-08-01 14:01:00.311 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:67 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:04:12.024474", "seconds": 252.024474}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 67, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.311957+02:00", "timestamp": 1754049660.311957}}}
{"text": "2025-08-01 14:01:00.313 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:04:12.025861", "seconds": 252.025861}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.313344+02:00", "timestamp": 1754049660.313344}}}
{"text": "2025-08-01 14:01:00.314 | DEBUG    | app.services.products.detail_service:get_product_details:35 - ✅ Cache hit produit:details pour produit:details:465576\n", "record": {"elapsed": {"repr": "0:04:12.026948", "seconds": 252.026948}, "exception": null, "extra": {}, "file": {"name": "detail_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\products\\detail_service.py"}, "function": "get_product_details", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 35, "message": "✅ Cache hit produit:details pour produit:details:465576", "module": "detail_service", "name": "app.services.products.detail_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.314431+02:00", "timestamp": 1754049660.314431}}}
{"text": "2025-08-01 14:01:00.315 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:79 - [Redis] set details\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF96E80>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF96E80>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF859F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF859F0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF859F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF859F0>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002637FF4BE30>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002637FF4B6A0>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026306662F20>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662700>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x0000026306662F20>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002637FF4B6A0>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671790>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671790>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 77, in get_dashboard_fiche\n    await redis_client.set(key_details, json.dumps({\"products\": details}), ex=3600)\n          │            │   │            │    │                  └ [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', statut=0, cod_...\n          │            │   │            │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │            └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:products:465576'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n           └ <_json.Encoder object at 0x000002630662FB20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', statut=0, cod_f...\n\nTypeError: Object of type ProductDetail is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:12.027531", "seconds": 252.027531}, "exception": {"type": "TypeError", "value": "Object of type ProductDetail is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 79, "message": "[Redis] set details", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.315014+02:00", "timestamp": 1754049660.315014}}}
{"text": "2025-08-01 14:01:00.335 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:04:12.047897", "seconds": 252.047897}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.335380+02:00", "timestamp": 1754049660.33538}}}
{"text": "2025-08-01 14:01:00.336 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:04:12.049021", "seconds": 252.049021}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.336504+02:00", "timestamp": 1754049660.336504}}}
{"text": "2025-08-01 14:01:00.337 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:04:12.050261", "seconds": 252.050261}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.337744+02:00", "timestamp": 1754049660.337744}}}
{"text": "2025-08-01 14:01:00.338 | DEBUG    | app.services.purchase.purchase_service:get_purchase_price:32 - ✅ Cache hit purchase_price pour purchase:price:465576\n", "record": {"elapsed": {"repr": "0:04:12.051209", "seconds": 252.051209}, "exception": null, "extra": {}, "file": {"name": "purchase_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\purchase\\purchase_service.py"}, "function": "get_purchase_price", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 32, "message": "✅ Cache hit purchase_price pour purchase:price:465576", "module": "purchase_service", "name": "app.services.purchase.purchase_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.338692+02:00", "timestamp": 1754049660.338692}}}
{"text": "2025-08-01 14:01:00.339 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:103 - [Redis] set purchase\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF96E80>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x000002637FF96E80>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF859F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF859F0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x000002637FF859F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x000002637FF859F0>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002637FF4BE30>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002637FF4B6A0>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026306662F20>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662700>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x000002637FF940E0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x0000026306662F20>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002637FF4B6A0>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671790>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671790>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 101, in get_dashboard_fiche\n    await redis_client.set(key_purchase, json.dumps({\"items\": purchase}), ex=3600)\n          │            │   │             │    │               └ [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]\n          │            │   │             │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │             └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:purchase:465576'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n           └ <_json.Encoder object at 0x000002630662E2C0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)\n\nTypeError: Object of type ProductPurchasePrice is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:12.052297", "seconds": 252.052297}, "exception": {"type": "TypeError", "value": "Object of type ProductPurchasePrice is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 103, "message": "[Redis] set purchase", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.339780+02:00", "timestamp": 1754049660.33978}}}
{"text": "2025-08-01 14:01:00.371 | INFO     | app.main:request_tracking_middleware:116 - ✅ [e9a36110] POST /api/v1/dashboard/fiche - 200 - 67.2ms\n", "record": {"elapsed": {"repr": "0:04:12.084137", "seconds": 252.084137}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [e9a36110] POST /api/v1/dashboard/fiche - 200 - 67.2ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:00.371620+02:00", "timestamp": 1754049660.37162}}}
{"text": "2025-08-01 14:01:07.875 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [f191f3d1] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:04:19.588272", "seconds": 259.588272}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [f191f3d1] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.875755+02:00", "timestamp": 1754049667.875755}}}
{"text": "2025-08-01 14:01:07.879 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:04:19.591932", "seconds": 259.591932}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.879415+02:00", "timestamp": 1754049667.879415}}}
{"text": "2025-08-01 14:01:07.880 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:55 - ✅ Cache hit dashboard:sales\n", "record": {"elapsed": {"repr": "0:04:19.593502", "seconds": 259.593502}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 55, "message": "✅ Cache hit dashboard:sales", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.880985+02:00", "timestamp": 1754049667.880985}}}
{"text": "2025-08-01 14:01:07.882 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:59 - ✅ Cache hit dashboard:stock\n", "record": {"elapsed": {"repr": "0:04:19.594647", "seconds": 259.594647}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 59, "message": "✅ Cache hit dashboard:stock", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.882130+02:00", "timestamp": 1754049667.88213}}}
{"text": "2025-08-01 14:01:07.883 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:67 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:04:19.596181", "seconds": 259.596181}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 67, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.883664+02:00", "timestamp": 1754049667.883664}}}
{"text": "2025-08-01 14:01:07.884 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:04:19.597507", "seconds": 259.597507}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.884990+02:00", "timestamp": 1754049667.88499}}}
{"text": "2025-08-01 14:01:07.886 | DEBUG    | app.services.products.detail_service:get_product_details:35 - ✅ Cache hit produit:details pour produit:details:465576\n", "record": {"elapsed": {"repr": "0:04:19.598538", "seconds": 259.598538}, "exception": null, "extra": {}, "file": {"name": "detail_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\products\\detail_service.py"}, "function": "get_product_details", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 35, "message": "✅ Cache hit produit:details pour produit:details:465576", "module": "detail_service", "name": "app.services.products.detail_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.886021+02:00", "timestamp": 1754049667.886021}}}
{"text": "2025-08-01 14:01:07.886 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:79 - [Redis] set details\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x00000263066622A0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x00000263066622A0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661310>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661310>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661310>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x0000026306661310>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002637FF4BC20>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000263066602C0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000263066602C0>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000263066602C0>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000263066602C0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000263066602C0>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002637FF4BAC0>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026306660360>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660AE0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x0000026306660360>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002637FF4BAC0>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671E50>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671E50>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 77, in get_dashboard_fiche\n    await redis_client.set(key_details, json.dumps({\"products\": details}), ex=3600)\n          │            │   │            │    │                  └ [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', statut=0, cod_...\n          │            │   │            │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │            └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:products:465576'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'products': [ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', s...\n           └ <_json.Encoder object at 0x0000026306671780>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductDetail(cod_pro=465576, refint='D9422317', ref_ext='5010285704', famille=2, s_famille=11, qualite='OE', statut=0, cod_f...\n\nTypeError: Object of type ProductDetail is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:19.599209", "seconds": 259.599209}, "exception": {"type": "TypeError", "value": "Object of type ProductDetail is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 79, "message": "[Redis] set details", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.886692+02:00", "timestamp": 1754049667.886692}}}
{"text": "2025-08-01 14:01:07.903 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:04:19.615693", "seconds": 259.615693}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.903176+02:00", "timestamp": 1754049667.903176}}}
{"text": "2025-08-01 14:01:07.904 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:04:19.617047", "seconds": 259.617047}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.904530+02:00", "timestamp": 1754049667.90453}}}
{"text": "2025-08-01 14:01:07.905 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:04:19.618358", "seconds": 259.618358}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.905841+02:00", "timestamp": 1754049667.905841}}}
{"text": "2025-08-01 14:01:07.907 | DEBUG    | app.services.purchase.purchase_service:get_purchase_price:32 - ✅ Cache hit purchase_price pour purchase:price:465576\n", "record": {"elapsed": {"repr": "0:04:19.619590", "seconds": 259.61959}, "exception": null, "extra": {}, "file": {"name": "purchase_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\purchase\\purchase_service.py"}, "function": "get_purchase_price", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 32, "message": "✅ Cache hit purchase_price pour purchase:price:465576", "module": "purchase_service", "name": "app.services.purchase.purchase_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.907073+02:00", "timestamp": 1754049667.907073}}}
{"text": "2025-08-01 14:01:07.907 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:103 - [Redis] set purchase\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x00000263066622A0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x00000263066622A0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661310>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661310>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661310>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x0000026306661310>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002637FF4BC20>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000263066602C0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000263066602C0>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000263066602C0>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000263066602C0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x00000263066602C0>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002637FF4BAC0>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026306660360>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660AE0>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x00000263066627A0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x0000026306660360>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002637FF4BAC0>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671E50>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671E50>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 101, in get_dashboard_fiche\n    await redis_client.set(key_purchase, json.dumps({\"items\": purchase}), ex=3600)\n          │            │   │             │    │               └ [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]\n          │            │   │             │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │             └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:purchase:465576'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)]}\n           └ <_json.Encoder object at 0x0000026306671780>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductPurchasePrice(cod_pro=465576, px_achat_eur=8.1977)\n\nTypeError: Object of type ProductPurchasePrice is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:19.620271", "seconds": 259.620271}, "exception": {"type": "TypeError", "value": "Object of type ProductPurchasePrice is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 103, "message": "[Redis] set purchase", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.907754+02:00", "timestamp": 1754049667.907754}}}
{"text": "2025-08-01 14:01:07.927 | INFO     | app.main:request_tracking_middleware:116 - ✅ [f191f3d1] POST /api/v1/dashboard/fiche - 200 - 51.4ms\n", "record": {"elapsed": {"repr": "0:04:19.639634", "seconds": 259.639634}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [f191f3d1] POST /api/v1/dashboard/fiche - 200 - 51.4ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:07.927117+02:00", "timestamp": 1754049667.927117}}}
{"text": "2025-08-01 14:01:13.305 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [67f34379] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:04:25.017806", "seconds": 265.017806}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [67f34379] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.305289+02:00", "timestamp": 1754049673.305289}}}
{"text": "2025-08-01 14:01:13.309 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:04:25.021751", "seconds": 265.021751}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.309234+02:00", "timestamp": 1754049673.309234}}}
{"text": "2025-08-01 14:01:13.313 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:67 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:04:25.025848", "seconds": 265.025848}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 67, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.313331+02:00", "timestamp": 1754049673.313331}}}
{"text": "2025-08-01 14:01:13.315 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:04:25.028486", "seconds": 265.028486}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.315969+02:00", "timestamp": 1754049673.315969}}}
{"text": "2025-08-01 14:01:13.317 | DEBUG    | app.services.products.detail_service:get_product_details:35 - ✅ Cache hit produit:details pour produit:details:700,20980\n", "record": {"elapsed": {"repr": "0:04:25.029923", "seconds": 265.029923}, "exception": null, "extra": {}, "file": {"name": "detail_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\products\\detail_service.py"}, "function": "get_product_details", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 35, "message": "✅ Cache hit produit:details pour produit:details:700,20980", "module": "detail_service", "name": "app.services.products.detail_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.317406+02:00", "timestamp": 1754049673.317406}}}
{"text": "2025-08-01 14:01:13.318 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:79 - [Redis] set details\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306661DA0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306661DA0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002637FF4B070>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002637FF48E10>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000263066602C0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x00000263066602C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002637FF48E10>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671C10>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671C10>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 77, in get_dashboard_fiche\n    await redis_client.set(key_details, json.dumps({\"products\": details}), ex=3600)\n          │            │   │            │    │                  └ [ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', statut=0, cod_fo...\n          │            │   │            │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │            └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:products:700,20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'products': [ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', sta...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'products': [ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', sta...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'products': [ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', sta...\n           └ <_json.Encoder object at 0x000002630662FE20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', statut=0, cod_fou...\n\nTypeError: Object of type ProductDetail is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:25.030938", "seconds": 265.030938}, "exception": {"type": "TypeError", "value": "Object of type ProductDetail is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 79, "message": "[Redis] set details", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.318421+02:00", "timestamp": 1754049673.318421}}}
{"text": "2025-08-01 14:01:13.342 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:04:25.055142", "seconds": 265.055142}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.342625+02:00", "timestamp": 1754049673.342625}}}
{"text": "2025-08-01 14:01:13.343 | DEBUG    | app.services.sales.sales_service:get_sales_aggregate:34 - ✅ Cache hit sales:agg pour sales:agg:700,20980\n", "record": {"elapsed": {"repr": "0:04:25.056336", "seconds": 265.056336}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_aggregate", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 34, "message": "✅ Cache hit sales:agg pour sales:agg:700,20980", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.343819+02:00", "timestamp": 1754049673.343819}}}
{"text": "2025-08-01 14:01:13.344 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:86 - [Redis] set sales\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306661DA0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306661DA0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002637FF4B070>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002637FF48E10>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000263066602C0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x00000263066602C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002637FF48E10>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671C10>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671C10>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 84, in get_dashboard_fiche\n    await redis_client.set(key_sales, json.dumps({\"items\": sales}), ex=3600)\n          │            │   │          │    │               └ [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, marge_perce...\n          │            │   │          │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │          └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:sales:700,20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, m...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, m...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, m...\n           └ <_json.Encoder object at 0x0000026306670A60>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, marge_percen...\n\nTypeError: Object of type ProductSalesAggregate is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:25.057148", "seconds": 265.057148}, "exception": {"type": "TypeError", "value": "Object of type ProductSalesAggregate is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 86, "message": "[Redis] set sales", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.344631+02:00", "timestamp": 1754049673.344631}}}
{"text": "2025-08-01 14:01:13.387 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:04:25.100118", "seconds": 265.100118}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.387601+02:00", "timestamp": 1754049673.387601}}}
{"text": "2025-08-01 14:01:13.388 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:04:25.101425", "seconds": 265.101425}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.388908+02:00", "timestamp": 1754049673.388908}}}
{"text": "2025-08-01 14:01:13.390 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:04:25.102565", "seconds": 265.102565}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.390048+02:00", "timestamp": 1754049673.390048}}}
{"text": "2025-08-01 14:01:13.391 | DEBUG    | app.services.stock.stock_service:get_stock_actuel:30 - ✅ Cache hit stock:actuel pour stock:actuel:700,20980\n", "record": {"elapsed": {"repr": "0:04:25.103804", "seconds": 265.103804}, "exception": null, "extra": {}, "file": {"name": "stock_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\stock\\stock_service.py"}, "function": "get_stock_actuel", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 30, "message": "✅ Cache hit stock:actuel pour stock:actuel:700,20980", "module": "stock_service", "name": "app.services.stock.stock_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.391287+02:00", "timestamp": 1754049673.391287}}}
{"text": "2025-08-01 14:01:13.391 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:96 - [Redis] set stock\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306661DA0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306661DA0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002637FF4B070>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002637FF48E10>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000263066602C0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x00000263066602C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002637FF48E10>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671C10>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671C10>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 94, in get_dashboard_fiche\n    await redis_client.set(key_stock, json.dumps({\"items\": stock}), ex=3600)\n          │            │   │          │    │               └ [ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91), ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88), Product...\n          │            │   │          │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │          └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:stock:700,20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91), ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91), ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91), ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88...\n           └ <_json.Encoder object at 0x000002630662E9E0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91)\n\nTypeError: Object of type ProductStock is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:25.104496", "seconds": 265.104496}, "exception": {"type": "TypeError", "value": "Object of type ProductStock is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 96, "message": "[Redis] set stock", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.391979+02:00", "timestamp": 1754049673.391979}}}
{"text": "2025-08-01 14:01:13.433 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:04:25.145829", "seconds": 265.145829}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.433312+02:00", "timestamp": 1754049673.433312}}}
{"text": "2025-08-01 14:01:13.434 | DEBUG    | app.services.purchase.purchase_service:get_purchase_price:32 - ✅ Cache hit purchase_price pour purchase:price:700,20980\n", "record": {"elapsed": {"repr": "0:04:25.146975", "seconds": 265.146975}, "exception": null, "extra": {}, "file": {"name": "purchase_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\purchase\\purchase_service.py"}, "function": "get_purchase_price", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 32, "message": "✅ Cache hit purchase_price pour purchase:price:700,20980", "module": "purchase_service", "name": "app.services.purchase.purchase_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.434458+02:00", "timestamp": 1754049673.434458}}}
{"text": "2025-08-01 14:01:13.435 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:103 - [Redis] set purchase\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306661DA0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306661DA0>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x00000263066622B0>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002637FF4B070>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662D40>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002637FF48E10>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x00000263066602C0>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306662F20>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306660CC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x00000263066602C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002637FF48E10>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671C10>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x0000026306671C10>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 101, in get_dashboard_fiche\n    await redis_client.set(key_purchase, json.dumps({\"items\": purchase}), ex=3600)\n          │            │   │             │    │               └ [ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8), ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]\n          │            │   │             │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │             └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:purchase:700,20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8), ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]}\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8), ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]}\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8), ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]}\n           └ <_json.Encoder object at 0x00000263066703A0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8)\n\nTypeError: Object of type ProductPurchasePrice is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:25.147868", "seconds": 265.147868}, "exception": {"type": "TypeError", "value": "Object of type ProductPurchasePrice is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 103, "message": "[Redis] set purchase", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.435351+02:00", "timestamp": 1754049673.435351}}}
{"text": "2025-08-01 14:01:13.458 | INFO     | app.main:request_tracking_middleware:116 - ✅ [67f34379] POST /api/v1/dashboard/fiche - 200 - 151.1ms\n", "record": {"elapsed": {"repr": "0:04:25.171395", "seconds": 265.171395}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [67f34379] POST /api/v1/dashboard/fiche - 200 - 151.1ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:13.458878+02:00", "timestamp": 1754049673.458878}}}
{"text": "2025-08-01 14:01:19.262 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [814e6935] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:04:30.975426", "seconds": 270.975426}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [814e6935] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.262909+02:00", "timestamp": 1754049679.262909}}}
{"text": "2025-08-01 14:01:19.283 | INFO     | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:78 - 📌 Résolution via grouping_crn=13, qualite=PMQ\n", "record": {"elapsed": {"repr": "0:04:30.995831", "seconds": 270.995831}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 78, "message": "📌 Résolution via grouping_crn=13, qualite=PMQ", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.283314+02:00", "timestamp": 1754049679.283314}}}
{"text": "2025-08-01 14:01:19.293 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:101 - ✅ Cache enregistré pour 2 cod_pro\n", "record": {"elapsed": {"repr": "0:04:31.006188", "seconds": 271.006188}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 101, "message": "✅ Cache enregistré pour 2 cod_pro", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.293671+02:00", "timestamp": 1754049679.293671}}}
{"text": "2025-08-01 14:01:19.297 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:67 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:04:31.009689", "seconds": 271.009689}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 67, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.297172+02:00", "timestamp": 1754049679.297172}}}
{"text": "2025-08-01 14:01:19.298 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:04:31.011014", "seconds": 271.011014}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.298497+02:00", "timestamp": 1754049679.298497}}}
{"text": "2025-08-01 14:01:19.299 | DEBUG    | app.services.products.detail_service:get_product_details:35 - ✅ Cache hit produit:details pour produit:details:700,20980\n", "record": {"elapsed": {"repr": "0:04:31.012418", "seconds": 271.012418}, "exception": null, "extra": {}, "file": {"name": "detail_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\products\\detail_service.py"}, "function": "get_product_details", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 35, "message": "✅ Cache hit produit:details pour produit:details:700,20980", "module": "detail_service", "name": "app.services.products.detail_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.299901+02:00", "timestamp": 1754049679.299901}}}
{"text": "2025-08-01 14:01:19.300 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:79 - [Redis] set details\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306662160>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306662160>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002637F086780>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002637FDF71D0>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026306662D40>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x0000026306662D40>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002637FDF71D0>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002630662E9F0>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002630662E9F0>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 77, in get_dashboard_fiche\n    await redis_client.set(key_details, json.dumps({\"products\": details}), ex=3600)\n          │            │   │            │    │                  └ [ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', statut=0, cod_fo...\n          │            │   │            │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │            └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:products:700,20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'products': [ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', sta...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'products': [ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', sta...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'products': [ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', sta...\n           └ <_json.Encoder object at 0x0000026306671F00>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductDetail(cod_pro=700, refint='D5022303', ref_ext='5010285704', famille=8, s_famille=10, qualite='PMQ', statut=0, cod_fou...\n\nTypeError: Object of type ProductDetail is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:31.013006", "seconds": 271.013006}, "exception": {"type": "TypeError", "value": "Object of type ProductDetail is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 79, "message": "[Redis] set details", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.300489+02:00", "timestamp": 1754049679.300489}}}
{"text": "2025-08-01 14:01:19.319 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:04:31.031744", "seconds": 271.031744}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.319227+02:00", "timestamp": 1754049679.319227}}}
{"text": "2025-08-01 14:01:19.320 | DEBUG    | app.services.sales.sales_service:get_sales_aggregate:34 - ✅ Cache hit sales:agg pour sales:agg:700,20980\n", "record": {"elapsed": {"repr": "0:04:31.032815", "seconds": 271.032815}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_aggregate", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 34, "message": "✅ Cache hit sales:agg pour sales:agg:700,20980", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.320298+02:00", "timestamp": 1754049679.320298}}}
{"text": "2025-08-01 14:01:19.321 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:86 - [Redis] set sales\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306662160>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306662160>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002637F086780>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002637FDF71D0>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026306662D40>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x0000026306662D40>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002637FDF71D0>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002630662E9F0>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002630662E9F0>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 84, in get_dashboard_fiche\n    await redis_client.set(key_sales, json.dumps({\"items\": sales}), ex=3600)\n          │            │   │          │    │               └ [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, marge_perce...\n          │            │   │          │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │          └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:sales:700,20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, m...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, m...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, m...\n           └ <_json.Encoder object at 0x0000026306670700>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductSalesAggregate(cod_pro=20980, refint='D5022304', ca_total=100.92, marge_total=24.04, quantite_total=11.0, marge_percen...\n\nTypeError: Object of type ProductSalesAggregate is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:31.033563", "seconds": 271.033563}, "exception": {"type": "TypeError", "value": "Object of type ProductSalesAggregate is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 86, "message": "[Redis] set sales", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.321046+02:00", "timestamp": 1754049679.321046}}}
{"text": "2025-08-01 14:01:19.350 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:04:31.063181", "seconds": 271.063181}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.350664+02:00", "timestamp": 1754049679.350664}}}
{"text": "2025-08-01 14:01:19.351 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:04:31.064172", "seconds": 271.064172}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.351655+02:00", "timestamp": 1754049679.351655}}}
{"text": "2025-08-01 14:01:19.353 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:04:31.065649", "seconds": 271.065649}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.353132+02:00", "timestamp": 1754049679.353132}}}
{"text": "2025-08-01 14:01:19.354 | DEBUG    | app.services.stock.stock_service:get_stock_actuel:30 - ✅ Cache hit stock:actuel pour stock:actuel:700,20980\n", "record": {"elapsed": {"repr": "0:04:31.066682", "seconds": 271.066682}, "exception": null, "extra": {}, "file": {"name": "stock_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\stock\\stock_service.py"}, "function": "get_stock_actuel", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 30, "message": "✅ Cache hit stock:actuel pour stock:actuel:700,20980", "module": "stock_service", "name": "app.services.stock.stock_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.354165+02:00", "timestamp": 1754049679.354165}}}
{"text": "2025-08-01 14:01:19.354 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:96 - [Redis] set stock\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306662160>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306662160>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002637F086780>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002637FDF71D0>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026306662D40>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x0000026306662D40>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002637FDF71D0>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002630662E9F0>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002630662E9F0>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 94, in get_dashboard_fiche\n    await redis_client.set(key_stock, json.dumps({\"items\": stock}), ex=3600)\n          │            │   │          │    │               └ [ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91), ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88), Product...\n          │            │   │          │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │          └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:stock:700,20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91), ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88...\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91), ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88...\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91), ProductStock(cod_pro=20980, depot=1, stock=3.0, pmp=7.88...\n           └ <_json.Encoder object at 0x0000026306671120>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductStock(cod_pro=700, depot=1, stock=11.0, pmp=1.91)\n\nTypeError: Object of type ProductStock is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:31.067289", "seconds": 271.067289}, "exception": {"type": "TypeError", "value": "Object of type ProductStock is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 96, "message": "[Redis] set stock", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.354772+02:00", "timestamp": 1754049679.354772}}}
{"text": "2025-08-01 14:01:19.389 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:04:31.101765", "seconds": 271.101765}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.389248+02:00", "timestamp": 1754049679.389248}}}
{"text": "2025-08-01 14:01:19.390 | DEBUG    | app.services.purchase.purchase_service:get_purchase_price:32 - ✅ Cache hit purchase_price pour purchase:price:700,20980\n", "record": {"elapsed": {"repr": "0:04:31.102851", "seconds": 271.102851}, "exception": null, "extra": {}, "file": {"name": "purchase_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\purchase\\purchase_service.py"}, "function": "get_purchase_price", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 32, "message": "✅ Cache hit purchase_price pour purchase:price:700,20980", "module": "purchase_service", "name": "app.services.purchase.purchase_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.390334+02:00", "timestamp": 1754049679.390334}}}
{"text": "2025-08-01 14:01:19.390 | ERROR    | app.services.dashboard.dashboard_service:get_dashboard_fiche:103 - [Redis] set purchase\nTraceback (most recent call last):\n\n  File \"<string>\", line 1, in <module>\n    from multiprocessing.spawn import spawn_main; spawn_main(parent_pid=8548, pipe_handle=404)\n                                      │           └ <function spawn_main at 0x000002637A446980>\n                                      └ <function spawn_main at 0x000002637A446980>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n    exitcode = _main(fd, parent_sentinel)\n               │     │   └ 264\n               │     └ 3\n               └ <function _main at 0x000002637A446A20>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n    return self._bootstrap(parent_sentinel)\n           │    │          └ 264\n           │    └ <function BaseProcess._bootstrap at 0x000002637A137B00>\n           └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 313, in _bootstrap\n    self.run()\n    │    └ <function BaseProcess.run at 0x000002637A137060>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\multiprocessing\\process.py\", line 108, in run\n    self._target(*self._args, **self._kwargs)\n    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000002637C686E40>, 'target': <bound method Server.run of <uvicorn.server.Server...\n    │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    │        │    └ ()\n    │    │        └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n    │    └ <function subprocess_started at 0x000002637C632980>\n    └ <SpawnProcess name='SpawnProcess-3' parent=8548 started>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n    target(sockets=sockets)\n    │              └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n    └ <bound method Server.run of <uvicorn.server.Server object at 0x000002637C686F90>>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n    return asyncio.run(self.serve(sockets=sockets))\n           │       │   │    │             └ [<socket.socket fd=516, family=2, type=1, proto=6, laddr=('0.0.0.0', 5180)>]\n           │       │   │    └ <function Server.serve at 0x000002637C631940>\n           │       │   └ <uvicorn.server.Server object at 0x000002637C686F90>\n           │       └ <function run at 0x000002637BE03420>\n           └ <module 'asyncio' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\asyncio\\\\__init__.py'>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 195, in run\n    return runner.run(main)\n           │      │   └ <coroutine object Server.serve at 0x000002637C745EE0>\n           │      └ <function Runner.run at 0x000002637C2D3B00>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\uvicorn\\...\n           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002637C2D16C0>\n           │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n           └ <asyncio.runners.Runner object at 0x000002637C687CB0>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 712, in run_until_complete\n    self.run_forever()\n    │    └ <function BaseEventLoop.run_forever at 0x000002637C2D1620>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 683, in run_forever\n    self._run_once()\n    │    └ <function BaseEventLoop._run_once at 0x000002637C2D3420>\n    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\base_events.py\", line 2040, in _run_once\n    handle._run()\n    │      └ <function Handle._run at 0x000002637BDEE660>\n    └ <Handle Task.task_wakeup()>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\asyncio\\events.py\", line 89, in _run\n    self._context.run(self._callback, *self._args)\n    │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n    │    │            │    │           └ <Handle Task.task_wakeup()>\n    │    │            │    └ <member '_callback' of 'Handle' objects>\n    │    │            └ <Handle Task.task_wakeup()>\n    │    └ <member '_context' of 'Handle' objects>\n    └ <Handle Task.task_wakeup()>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306662160>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x000002637FECD940>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:5180', 'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:141.0) Gecko/20100101 Firefox/...\n          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x0000026306662160>\n          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function CORSMiddleware.simple_response at 0x000002637D7D5080>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.gzip.GZipMiddleware object at 0x000002637FECD6A0>\n          └ <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n          │         │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n          │         │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │         └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n                           │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x000002637FECD7F0...\n                           │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n          │    │   │      │        │    └ <function IdentityResponder.send_with_compression at 0x000002637D7D7600>\n          │    │   │      │        └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n          │                            │    │    │     │      │        └ <bound method IdentityResponder.send_with_compression of <starlette.middleware.gzip.GZipResponder object at 0x0000026306661A90>>\n          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    │    └ <starlette.requests.Request object at 0x000002637F086780>\n          │                            │    └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000002637FECD550>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>>\n          └ <fastapi.routing.APIRouter object at 0x000002637FE5E5D0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │     └ <function Route.handle at 0x000002637D735D00>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │    └ <function request_response.<locals>.app at 0x000002637FED1260>\n          └ APIRoute(path='/api/v1/dashboard/fiche', name='dashboard_fiche', methods=['POST'])\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306661300>\n          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          │                            │    └ <starlette.requests.Request object at 0x000002637FDF71D0>\n          │                            └ <function request_response.<locals>.app.<locals>.app at 0x0000026306662D40>\n          └ <function wrap_app_handling_exceptions at 0x000002637D734540>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x0000026306660360>\n          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x0000026306662AC0>\n          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 5180), 'cl...\n          └ <function request_response.<locals>.app.<locals>.app at 0x0000026306662D40>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n                     │ └ <starlette.requests.Request object at 0x000002637FDF71D0>\n                     └ <function get_request_handler.<locals>.app at 0x000002637FED11C0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                         └ <function run_endpoint_function at 0x000002637D7340E0>\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n                 │         │      └ {'db': <sqlalchemy.orm.session.AsyncSession object at 0x000002630662E9F0>, 'payload': DashboardFilterRequest(cod_pro=20980, r...\n                 │         └ <function dashboard_fiche at 0x000002637FAD1120>\n                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...\n\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\dashboard\\dashboard_router.py\", line 18, in dashboard_fiche\n    return await get_dashboard_fiche(payload, db)\n                 │                   │        └ <sqlalchemy.orm.session.AsyncSession object at 0x000002630662E9F0>\n                 │                   └ DashboardFilterRequest(cod_pro=20980, ref_crn=None, refint=None, ref_ext=None, cod_pro_list=[], famille=None, s_famille=None,...\n                 └ <function get_dashboard_fiche at 0x000002637FAD13A0>\n\n> File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py\", line 101, in get_dashboard_fiche\n    await redis_client.set(key_purchase, json.dumps({\"items\": purchase}), ex=3600)\n          │            │   │             │    │               └ [ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8), ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]\n          │            │   │             │    └ <function dumps at 0x000002637C38ACA0>\n          │            │   │             └ <module 'json' from 'C:\\\\Program Files (x86)\\\\Python\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n          │            │   └ 'dashboard:purchase:700,20980'\n          │            └ <function BasicKeyCommands.set at 0x000002637F5502C0>\n          └ <redis.asyncio.client.Redis(<redis.asyncio.connection.ConnectionPool(<redis.asyncio.connection.Connection(host=localhost,port...\n\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           │                │      └ {'items': [ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8), ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]}\n           │                └ <function JSONEncoder.encode at 0x000002637C38B240>\n           └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             │    │          └ {'items': [ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8), ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]}\n             │    └ <function JSONEncoder.iterencode at 0x000002637C38B2E0>\n             └ <json.encoder.JSONEncoder object at 0x000002637BE23380>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 261, in iterencode\n    return _iterencode(o, 0)\n           │           └ {'items': [ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8), ProductPurchasePrice(cod_pro=20980, px_achat_eur=7.88)]}\n           └ <_json.Encoder object at 0x0000026306670A00>\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\json\\encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\n                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>\n                                      │ └ <attribute '__class__' of 'object' objects>\n                                      └ ProductPurchasePrice(cod_pro=700, px_achat_eur=1.8)\n\nTypeError: Object of type ProductPurchasePrice is not JSON serializable\n", "record": {"elapsed": {"repr": "0:04:31.103380", "seconds": 271.10338}, "exception": {"type": "TypeError", "value": "Object of type ProductPurchasePrice is not JSON serializable", "traceback": true}, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 103, "message": "[Redis] set purchase", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.390863+02:00", "timestamp": 1754049679.390863}}}
{"text": "2025-08-01 14:01:19.438 | INFO     | app.main:request_tracking_middleware:116 - ✅ [814e6935] POST /api/v1/dashboard/fiche - 200 - 175.7ms\n", "record": {"elapsed": {"repr": "0:04:31.151142", "seconds": 271.151142}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [814e6935] POST /api/v1/dashboard/fiche - 200 - 175.7ms", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:01:19.438625+02:00", "timestamp": 1754049679.438625}}}
{"text": "2025-08-01 14:03:44.350 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:06:56.063148", "seconds": 416.063148}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 9572, "name": "SpawnProcess-3"}, "thread": {"id": 12752, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:44.350631+02:00", "timestamp": 1754049824.350631}}}
{"text": "2025-08-01 14:03:48.006 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:01.067063", "seconds": 1.067063}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:48.006725+02:00", "timestamp": 1754049828.006725}}}
{"text": "2025-08-01 14:03:48.016 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:01.077169", "seconds": 1.077169}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:48.016831+02:00", "timestamp": 1754049828.016831}}}
{"text": "2025-08-01 14:03:48.017 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:01.077565", "seconds": 1.077565}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:48.017227+02:00", "timestamp": 1754049828.017227}}}
{"text": "2025-08-01 14:03:48.274 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:01.334708", "seconds": 1.334708}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:48.274370+02:00", "timestamp": 1754049828.27437}}}
{"text": "2025-08-01 14:03:48.274 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:01.335185", "seconds": 1.335185}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:48.274847+02:00", "timestamp": 1754049828.274847}}}
{"text": "2025-08-01 14:03:54.028 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [7805e298] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:07.089273", "seconds": 7.089273}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [7805e298] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:54.028935+02:00", "timestamp": 1754049834.028935}}}
{"text": "2025-08-01 14:03:54.222 | INFO     | app.main:request_tracking_middleware:116 - ✅ [7805e298] GET /api/v1/suggestions/refint-codpro - 200 - 193.4ms\n", "record": {"elapsed": {"repr": "0:00:07.282675", "seconds": 7.282675}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [7805e298] GET /api/v1/suggestions/refint-codpro - 200 - 193.4ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:54.222337+02:00", "timestamp": 1754049834.222337}}}
{"text": "2025-08-01 14:03:54.960 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [c39880cf] OPTIONS /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:08.020496", "seconds": 8.020496}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [c39880cf] OPTIONS /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:54.960158+02:00", "timestamp": 1754049834.960158}}}
{"text": "2025-08-01 14:03:54.961 | INFO     | app.main:request_tracking_middleware:116 - ✅ [c39880cf] OPTIONS /api/v1/dashboard/fiche - 200 - 1.3ms\n", "record": {"elapsed": {"repr": "0:00:08.021845", "seconds": 8.021845}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [c39880cf] OPTIONS /api/v1/dashboard/fiche - 200 - 1.3ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:54.961507+02:00", "timestamp": 1754049834.961507}}}
{"text": "2025-08-01 14:03:54.965 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [0681db54] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:08.025368", "seconds": 8.025368}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [0681db54] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:54.965030+02:00", "timestamp": 1754049834.96503}}}
{"text": "2025-08-01 14:03:54.987 | INFO     | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:78 - 📌 Résolution via grouping_crn=13, qualite=PMQ\n", "record": {"elapsed": {"repr": "0:00:08.047913", "seconds": 8.047913}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 78, "message": "📌 Résolution via grouping_crn=13, qualite=PMQ", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:54.987575+02:00", "timestamp": 1754049834.987575}}}
{"text": "2025-08-01 14:03:54.998 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:101 - ✅ Cache enregistré pour 2 cod_pro\n", "record": {"elapsed": {"repr": "0:00:08.058431", "seconds": 8.058431}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 101, "message": "✅ Cache enregistré pour 2 cod_pro", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:54.998093+02:00", "timestamp": 1754049834.998093}}}
{"text": "2025-08-01 14:03:55.000 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:76 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:00:08.060340", "seconds": 8.06034}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 76, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:55.000002+02:00", "timestamp": 1754049835.000002}}}
{"text": "2025-08-01 14:03:55.001 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:00:08.061581", "seconds": 8.061581}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:55.001243+02:00", "timestamp": 1754049835.001243}}}
{"text": "2025-08-01 14:03:55.002 | DEBUG    | app.services.products.detail_service:get_product_details:35 - ✅ Cache hit produit:details pour produit:details:700,20980\n", "record": {"elapsed": {"repr": "0:00:08.062541", "seconds": 8.062541}, "exception": null, "extra": {}, "file": {"name": "detail_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\products\\detail_service.py"}, "function": "get_product_details", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 35, "message": "✅ Cache hit produit:details pour produit:details:700,20980", "module": "detail_service", "name": "app.services.products.detail_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:55.002203+02:00", "timestamp": 1754049835.002203}}}
{"text": "2025-08-01 14:03:55.003 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:00:08.064286", "seconds": 8.064286}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:55.003948+02:00", "timestamp": 1754049835.003948}}}
{"text": "2025-08-01 14:03:55.005 | DEBUG    | app.services.sales.sales_service:get_sales_aggregate:34 - ✅ Cache hit sales:agg pour sales:agg:700,20980\n", "record": {"elapsed": {"repr": "0:00:08.065403", "seconds": 8.065403}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_aggregate", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 34, "message": "✅ Cache hit sales:agg pour sales:agg:700,20980", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:55.005065+02:00", "timestamp": 1754049835.005065}}}
{"text": "2025-08-01 14:03:55.006 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:00:08.066884", "seconds": 8.066884}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:55.006546+02:00", "timestamp": 1754049835.006546}}}
{"text": "2025-08-01 14:03:55.007 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:00:08.067620", "seconds": 8.06762}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:55.007282+02:00", "timestamp": 1754049835.007282}}}
{"text": "2025-08-01 14:03:55.008 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:00:08.068885", "seconds": 8.068885}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:55.008547+02:00", "timestamp": 1754049835.008547}}}
{"text": "2025-08-01 14:03:55.009 | DEBUG    | app.services.stock.stock_service:get_stock_actuel:30 - ✅ Cache hit stock:actuel pour stock:actuel:700,20980\n", "record": {"elapsed": {"repr": "0:00:08.069467", "seconds": 8.069467}, "exception": null, "extra": {}, "file": {"name": "stock_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\stock\\stock_service.py"}, "function": "get_stock_actuel", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 30, "message": "✅ Cache hit stock:actuel pour stock:actuel:700,20980", "module": "stock_service", "name": "app.services.stock.stock_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:55.009129+02:00", "timestamp": 1754049835.009129}}}
{"text": "2025-08-01 14:03:55.010 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:00:08.071192", "seconds": 8.071192}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:55.010854+02:00", "timestamp": 1754049835.010854}}}
{"text": "2025-08-01 14:03:55.011 | DEBUG    | app.services.purchase.purchase_service:get_purchase_price:32 - ✅ Cache hit purchase_price pour purchase:price:700,20980\n", "record": {"elapsed": {"repr": "0:00:08.072205", "seconds": 8.072205}, "exception": null, "extra": {}, "file": {"name": "purchase_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\purchase\\purchase_service.py"}, "function": "get_purchase_price", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 32, "message": "✅ Cache hit purchase_price pour purchase:price:700,20980", "module": "purchase_service", "name": "app.services.purchase.purchase_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:55.011867+02:00", "timestamp": 1754049835.011867}}}
{"text": "2025-08-01 14:03:55.014 | INFO     | app.main:request_tracking_middleware:116 - ✅ [0681db54] POST /api/v1/dashboard/fiche - 200 - 49.7ms\n", "record": {"elapsed": {"repr": "0:00:08.075031", "seconds": 8.075031}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [0681db54] POST /api/v1/dashboard/fiche - 200 - 49.7ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:03:55.014693+02:00", "timestamp": 1754049835.014693}}}
{"text": "2025-08-01 14:04:05.624 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [f246100d] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:18.684701", "seconds": 18.684701}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [f246100d] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:05.624363+02:00", "timestamp": 1754049845.624363}}}
{"text": "2025-08-01 14:04:05.632 | INFO     | app.main:request_tracking_middleware:116 - ✅ [f246100d] POST /api/v1/dashboard/fiche - 200 - 7.7ms\n", "record": {"elapsed": {"repr": "0:00:18.692413", "seconds": 18.692413}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [f246100d] POST /api/v1/dashboard/fiche - 200 - 7.7ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:05.632075+02:00", "timestamp": 1754049845.632075}}}
{"text": "2025-08-01 14:04:07.276 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [908275a0] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:20.336380", "seconds": 20.33638}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [908275a0] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:07.276042+02:00", "timestamp": 1754049847.276042}}}
{"text": "2025-08-01 14:04:07.280 | INFO     | app.main:request_tracking_middleware:116 - ✅ [908275a0] POST /api/v1/dashboard/fiche - 200 - 4.8ms\n", "record": {"elapsed": {"repr": "0:00:20.341168", "seconds": 20.341168}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [908275a0] POST /api/v1/dashboard/fiche - 200 - 4.8ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:07.280830+02:00", "timestamp": 1754049847.28083}}}
{"text": "2025-08-01 14:04:15.475 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [15ce1bed] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:28.535405", "seconds": 28.535405}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [15ce1bed] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:15.475067+02:00", "timestamp": 1754049855.475067}}}
{"text": "2025-08-01 14:04:15.481 | INFO     | app.main:request_tracking_middleware:116 - ✅ [15ce1bed] POST /api/v1/dashboard/fiche - 200 - 6.9ms\n", "record": {"elapsed": {"repr": "0:00:28.542274", "seconds": 28.542274}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [15ce1bed] POST /api/v1/dashboard/fiche - 200 - 6.9ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:15.481936+02:00", "timestamp": 1754049855.481936}}}
{"text": "2025-08-01 14:04:19.417 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [340d17a7] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:32.477345", "seconds": 32.477345}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [340d17a7] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:19.417007+02:00", "timestamp": 1754049859.417007}}}
{"text": "2025-08-01 14:04:19.419 | INFO     | app.main:request_tracking_middleware:116 - ✅ [340d17a7] POST /api/v1/dashboard/fiche - 200 - 2.8ms\n", "record": {"elapsed": {"repr": "0:00:32.480122", "seconds": 32.480122}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [340d17a7] POST /api/v1/dashboard/fiche - 200 - 2.8ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:19.419784+02:00", "timestamp": 1754049859.419784}}}
{"text": "2025-08-01 14:04:25.211 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [dcc01488] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:38.272085", "seconds": 38.272085}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [dcc01488] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:25.211747+02:00", "timestamp": 1754049865.211747}}}
{"text": "2025-08-01 14:04:25.366 | INFO     | app.main:request_tracking_middleware:116 - ✅ [dcc01488] GET /api/v1/suggestions/refint-codpro - 200 - 154.4ms\n", "record": {"elapsed": {"repr": "0:00:38.426457", "seconds": 38.426457}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [dcc01488] GET /api/v1/suggestions/refint-codpro - 200 - 154.4ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:25.366119+02:00", "timestamp": 1754049865.366119}}}
{"text": "2025-08-01 14:04:26.890 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [2c50f433] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:39.950471", "seconds": 39.950471}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [2c50f433] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:26.890133+02:00", "timestamp": 1754049866.890133}}}
{"text": "2025-08-01 14:04:26.894 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [964a3b0f] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:39.955150", "seconds": 39.95515}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [964a3b0f] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:26.894812+02:00", "timestamp": 1754049866.894812}}}
{"text": "2025-08-01 14:04:26.991 | INFO     | app.main:request_tracking_middleware:116 - ✅ [2c50f433] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 101.6ms\n", "record": {"elapsed": {"repr": "0:00:40.051995", "seconds": 40.051995}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [2c50f433] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 101.6ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:26.991657+02:00", "timestamp": 1754049866.991657}}}
{"text": "2025-08-01 14:04:27.005 | INFO     | app.main:request_tracking_middleware:116 - ✅ [964a3b0f] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 110.3ms\n", "record": {"elapsed": {"repr": "0:00:40.065433", "seconds": 40.065433}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [964a3b0f] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 110.3ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:27.005095+02:00", "timestamp": 1754049867.005095}}}
{"text": "2025-08-01 14:04:27.053 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [40f3b70e] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:40.113466", "seconds": 40.113466}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [40f3b70e] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:27.053128+02:00", "timestamp": 1754049867.053128}}}
{"text": "2025-08-01 14:04:27.265 | INFO     | app.main:request_tracking_middleware:116 - ✅ [40f3b70e] GET /api/v1/suggestions/refint-codpro - 200 - 212.7ms\n", "record": {"elapsed": {"repr": "0:00:40.326167", "seconds": 40.326167}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [40f3b70e] GET /api/v1/suggestions/refint-codpro - 200 - 212.7ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:27.265829+02:00", "timestamp": 1754049867.265829}}}
{"text": "2025-08-01 14:04:34.275 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [20b8bc9d] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:47.336135", "seconds": 47.336135}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [20b8bc9d] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.275797+02:00", "timestamp": 1754049874.275797}}}
{"text": "2025-08-01 14:04:34.297 | INFO     | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:78 - 📌 Résolution via grouping_crn=13, qualite=None\n", "record": {"elapsed": {"repr": "0:00:47.357888", "seconds": 47.357888}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 78, "message": "📌 Résolution via grouping_crn=13, qualite=None", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.297550+02:00", "timestamp": 1754049874.29755}}}
{"text": "2025-08-01 14:04:34.314 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:101 - ✅ Cache enregistré pour 3 cod_pro\n", "record": {"elapsed": {"repr": "0:00:47.374893", "seconds": 47.374893}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 101, "message": "✅ Cache enregistré pour 3 cod_pro", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.314555+02:00", "timestamp": 1754049874.314555}}}
{"text": "2025-08-01 14:04:34.317 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:76 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:00:47.377490", "seconds": 47.37749}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 76, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.317152+02:00", "timestamp": 1754049874.317152}}}
{"text": "2025-08-01 14:04:34.318 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8\n", "record": {"elapsed": {"repr": "0:00:47.378843", "seconds": 47.378843}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.318505+02:00", "timestamp": 1754049874.318505}}}
{"text": "2025-08-01 14:04:34.319 | DEBUG    | app.services.products.detail_service:get_product_details:35 - ✅ Cache hit produit:details pour produit:details:700,20980,465576\n", "record": {"elapsed": {"repr": "0:00:47.379997", "seconds": 47.379997}, "exception": null, "extra": {}, "file": {"name": "detail_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\products\\detail_service.py"}, "function": "get_product_details", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 35, "message": "✅ Cache hit produit:details pour produit:details:700,20980,465576", "module": "detail_service", "name": "app.services.products.detail_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.319659+02:00", "timestamp": 1754049874.319659}}}
{"text": "2025-08-01 14:04:34.321 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8\n", "record": {"elapsed": {"repr": "0:00:47.381617", "seconds": 47.381617}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.321279+02:00", "timestamp": 1754049874.321279}}}
{"text": "2025-08-01 14:04:34.322 | DEBUG    | app.services.sales.sales_service:get_sales_aggregate:34 - ✅ Cache hit sales:agg pour sales:agg:700,20980,465576\n", "record": {"elapsed": {"repr": "0:00:47.382528", "seconds": 47.382528}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_aggregate", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 34, "message": "✅ Cache hit sales:agg pour sales:agg:700,20980,465576", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.322190+02:00", "timestamp": 1754049874.32219}}}
{"text": "2025-08-01 14:04:34.324 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8\n", "record": {"elapsed": {"repr": "0:00:47.384345", "seconds": 47.384345}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.324007+02:00", "timestamp": 1754049874.324007}}}
{"text": "2025-08-01 14:04:34.325 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980, 465576], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:00:47.385381", "seconds": 47.385381}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980, 465576], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.325043+02:00", "timestamp": 1754049874.325043}}}
{"text": "2025-08-01 14:04:34.326 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8\n", "record": {"elapsed": {"repr": "0:00:47.386620", "seconds": 47.38662}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.326282+02:00", "timestamp": 1754049874.326282}}}
{"text": "2025-08-01 14:04:34.327 | DEBUG    | app.services.stock.stock_service:get_stock_actuel:30 - ✅ Cache hit stock:actuel pour stock:actuel:700,20980,465576\n", "record": {"elapsed": {"repr": "0:00:47.388168", "seconds": 47.388168}, "exception": null, "extra": {}, "file": {"name": "stock_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\stock\\stock_service.py"}, "function": "get_stock_actuel", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 30, "message": "✅ Cache hit stock:actuel pour stock:actuel:700,20980,465576", "module": "stock_service", "name": "app.services.stock.stock_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.327830+02:00", "timestamp": 1754049874.32783}}}
{"text": "2025-08-01 14:04:34.331 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8\n", "record": {"elapsed": {"repr": "0:00:47.392233", "seconds": 47.392233}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.331895+02:00", "timestamp": 1754049874.331895}}}
{"text": "2025-08-01 14:04:34.335 | DEBUG    | app.services.purchase.purchase_service:get_purchase_price:32 - ✅ Cache hit purchase_price pour purchase:price:700,20980,465576\n", "record": {"elapsed": {"repr": "0:00:47.395890", "seconds": 47.39589}, "exception": null, "extra": {}, "file": {"name": "purchase_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\purchase\\purchase_service.py"}, "function": "get_purchase_price", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 32, "message": "✅ Cache hit purchase_price pour purchase:price:700,20980,465576", "module": "purchase_service", "name": "app.services.purchase.purchase_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.335552+02:00", "timestamp": 1754049874.335552}}}
{"text": "2025-08-01 14:04:34.362 | INFO     | app.main:request_tracking_middleware:116 - ✅ [20b8bc9d] POST /api/v1/dashboard/fiche - 200 - 86.8ms\n", "record": {"elapsed": {"repr": "0:00:47.422957", "seconds": 47.422957}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [20b8bc9d] POST /api/v1/dashboard/fiche - 200 - 86.8ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:34.362619+02:00", "timestamp": 1754049874.362619}}}
{"text": "2025-08-01 14:04:35.481 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [269e2ac7] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:48.541588", "seconds": 48.541588}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [269e2ac7] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:35.481250+02:00", "timestamp": 1754049875.48125}}}
{"text": "2025-08-01 14:04:36.186 | INFO     | app.main:request_tracking_middleware:116 - ✅ [269e2ac7] GET /api/v1/suggestions/refint-codpro - 200 - 705.2ms\n", "record": {"elapsed": {"repr": "0:00:49.246920", "seconds": 49.24692}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [269e2ac7] GET /api/v1/suggestions/refint-codpro - 200 - 705.2ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:36.186582+02:00", "timestamp": 1754049876.186582}}}
{"text": "2025-08-01 14:04:39.635 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [3f8ea05b] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:52.696263", "seconds": 52.696263}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [3f8ea05b] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:39.635925+02:00", "timestamp": 1754049879.635925}}}
{"text": "2025-08-01 14:04:39.661 | INFO     | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:78 - 📌 Résolution via grouping_crn=13, qualite=OE\n", "record": {"elapsed": {"repr": "0:00:52.721577", "seconds": 52.721577}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 78, "message": "📌 Résolution via grouping_crn=13, qualite=OE", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:39.661239+02:00", "timestamp": 1754049879.661239}}}
{"text": "2025-08-01 14:04:39.673 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:101 - ✅ Cache enregistré pour 1 cod_pro\n", "record": {"elapsed": {"repr": "0:00:52.733494", "seconds": 52.733494}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 101, "message": "✅ Cache enregistré pour 1 cod_pro", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:39.673156+02:00", "timestamp": 1754049879.673156}}}
{"text": "2025-08-01 14:04:39.674 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:64 - ✅ Cache hit dashboard:sales\n", "record": {"elapsed": {"repr": "0:00:52.735328", "seconds": 52.735328}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 64, "message": "✅ Cache hit dashboard:sales", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:39.674990+02:00", "timestamp": 1754049879.67499}}}
{"text": "2025-08-01 14:04:39.676 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:68 - ✅ Cache hit dashboard:stock\n", "record": {"elapsed": {"repr": "0:00:52.736414", "seconds": 52.736414}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 68, "message": "✅ Cache hit dashboard:stock", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:39.676076+02:00", "timestamp": 1754049879.676076}}}
{"text": "2025-08-01 14:04:39.678 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:76 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:00:52.738438", "seconds": 52.738438}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 76, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:39.678100+02:00", "timestamp": 1754049879.6781}}}
{"text": "2025-08-01 14:04:39.679 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:00:52.739963", "seconds": 52.739963}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:39.679625+02:00", "timestamp": 1754049879.679625}}}
{"text": "2025-08-01 14:04:39.680 | DEBUG    | app.services.products.detail_service:get_product_details:35 - ✅ Cache hit produit:details pour produit:details:465576\n", "record": {"elapsed": {"repr": "0:00:52.741232", "seconds": 52.741232}, "exception": null, "extra": {}, "file": {"name": "detail_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\products\\detail_service.py"}, "function": "get_product_details", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 35, "message": "✅ Cache hit produit:details pour produit:details:465576", "module": "detail_service", "name": "app.services.products.detail_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:39.680894+02:00", "timestamp": 1754049879.680894}}}
{"text": "2025-08-01 14:04:39.682 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:00:52.743039", "seconds": 52.743039}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:39.682701+02:00", "timestamp": 1754049879.682701}}}
{"text": "2025-08-01 14:04:39.683 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:00:52.744015", "seconds": 52.744015}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:39.683677+02:00", "timestamp": 1754049879.683677}}}
{"text": "2025-08-01 14:04:39.685 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:00:52.745389", "seconds": 52.745389}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:39.685051+02:00", "timestamp": 1754049879.685051}}}
{"text": "2025-08-01 14:04:39.686 | DEBUG    | app.services.purchase.purchase_service:get_purchase_price:32 - ✅ Cache hit purchase_price pour purchase:price:465576\n", "record": {"elapsed": {"repr": "0:00:52.746685", "seconds": 52.746685}, "exception": null, "extra": {}, "file": {"name": "purchase_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\purchase\\purchase_service.py"}, "function": "get_purchase_price", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 32, "message": "✅ Cache hit purchase_price pour purchase:price:465576", "module": "purchase_service", "name": "app.services.purchase.purchase_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:39.686347+02:00", "timestamp": 1754049879.686347}}}
{"text": "2025-08-01 14:04:39.699 | INFO     | app.main:request_tracking_middleware:116 - ✅ [3f8ea05b] POST /api/v1/dashboard/fiche - 200 - 64.0ms\n", "record": {"elapsed": {"repr": "0:00:52.760260", "seconds": 52.76026}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [3f8ea05b] POST /api/v1/dashboard/fiche - 200 - 64.0ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:39.699922+02:00", "timestamp": 1754049879.699922}}}
{"text": "2025-08-01 14:04:44.450 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [a41fe1c2] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:00:57.510564", "seconds": 57.510564}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [a41fe1c2] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:44.450226+02:00", "timestamp": 1754049884.450226}}}
{"text": "2025-08-01 14:04:44.453 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:00:57.514258", "seconds": 57.514258}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:44.453920+02:00", "timestamp": 1754049884.45392}}}
{"text": "2025-08-01 14:04:44.455 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:60 - ✅ Cache hit dashboard:products\n", "record": {"elapsed": {"repr": "0:00:57.515454", "seconds": 57.515454}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 60, "message": "✅ Cache hit dashboard:products", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:44.455116+02:00", "timestamp": 1754049884.455116}}}
{"text": "2025-08-01 14:04:44.456 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:64 - ✅ Cache hit dashboard:sales\n", "record": {"elapsed": {"repr": "0:00:57.516615", "seconds": 57.516615}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 64, "message": "✅ Cache hit dashboard:sales", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:44.456277+02:00", "timestamp": 1754049884.456277}}}
{"text": "2025-08-01 14:04:44.457 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:68 - ✅ Cache hit dashboard:stock\n", "record": {"elapsed": {"repr": "0:00:57.517709", "seconds": 57.517709}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 68, "message": "✅ Cache hit dashboard:stock", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:44.457371+02:00", "timestamp": 1754049884.457371}}}
{"text": "2025-08-01 14:04:44.458 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:72 - ✅ Cache hit dashboard:purchase\n", "record": {"elapsed": {"repr": "0:00:57.518732", "seconds": 57.518732}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 72, "message": "✅ Cache hit dashboard:purchase", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:44.458394+02:00", "timestamp": 1754049884.458394}}}
{"text": "2025-08-01 14:04:44.459 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:76 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:00:57.520018", "seconds": 57.520018}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 76, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:44.459680+02:00", "timestamp": 1754049884.45968}}}
{"text": "2025-08-01 14:04:44.460 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59\n", "record": {"elapsed": {"repr": "0:00:57.521101", "seconds": 57.521101}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:2d386b4229eab03ed204bff181b80c59", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:44.460763+02:00", "timestamp": 1754049884.460763}}}
{"text": "2025-08-01 14:04:44.461 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:00:57.522167", "seconds": 57.522167}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [465576], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:44.461829+02:00", "timestamp": 1754049884.461829}}}
{"text": "2025-08-01 14:04:44.463 | INFO     | app.main:request_tracking_middleware:116 - ✅ [a41fe1c2] POST /api/v1/dashboard/fiche - 200 - 12.9ms\n", "record": {"elapsed": {"repr": "0:00:57.523480", "seconds": 57.52348}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [a41fe1c2] POST /api/v1/dashboard/fiche - 200 - 12.9ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:04:44.463142+02:00", "timestamp": 1754049884.463142}}}
{"text": "2025-08-01 14:05:45.752 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [8426cb9e] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:58.812399", "seconds": 118.812399}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [8426cb9e] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:45.752061+02:00", "timestamp": 1754049945.752061}}}
{"text": "2025-08-01 14:05:45.756 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [db481feb] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:58.816390", "seconds": 118.81639}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [db481feb] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:45.756052+02:00", "timestamp": 1754049945.756052}}}
{"text": "2025-08-01 14:05:45.827 | INFO     | app.main:request_tracking_middleware:116 - ✅ [db481feb] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 71.7ms\n", "record": {"elapsed": {"repr": "0:01:58.888090", "seconds": 118.88809}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [db481feb] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 71.7ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:45.827752+02:00", "timestamp": 1754049945.827752}}}
{"text": "2025-08-01 14:05:45.831 | INFO     | app.main:request_tracking_middleware:116 - ✅ [8426cb9e] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 79.3ms\n", "record": {"elapsed": {"repr": "0:01:58.891722", "seconds": 118.891722}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [8426cb9e] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 79.3ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:45.831384+02:00", "timestamp": 1754049945.831384}}}
{"text": "2025-08-01 14:05:45.957 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [53746eb7] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:59.017341", "seconds": 119.017341}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [53746eb7] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:45.957003+02:00", "timestamp": 1754049945.957003}}}
{"text": "2025-08-01 14:05:46.158 | INFO     | app.main:request_tracking_middleware:116 - ✅ [53746eb7] GET /api/v1/suggestions/refint-codpro - 200 - 201.8ms\n", "record": {"elapsed": {"repr": "0:01:59.219098", "seconds": 119.219098}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [53746eb7] GET /api/v1/suggestions/refint-codpro - 200 - 201.8ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:46.158760+02:00", "timestamp": 1754049946.15876}}}
{"text": "2025-08-01 14:05:50.624 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [9f2415f8] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:02:03.684404", "seconds": 123.684404}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [9f2415f8] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.624066+02:00", "timestamp": 1754049950.624066}}}
{"text": "2025-08-01 14:05:50.628 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:101 - ✅ Cache enregistré pour 1 cod_pro\n", "record": {"elapsed": {"repr": "0:02:03.688553", "seconds": 123.688553}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 101, "message": "✅ Cache enregistré pour 1 cod_pro", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.628215+02:00", "timestamp": 1754049950.628215}}}
{"text": "2025-08-01 14:05:50.630 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:76 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:02:03.690708", "seconds": 123.690708}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 76, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.630370+02:00", "timestamp": 1754049950.63037}}}
{"text": "2025-08-01 14:05:50.631 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:abe6701bf637547b965ae23b83a29957\n", "record": {"elapsed": {"repr": "0:02:03.691803", "seconds": 123.691803}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:abe6701bf637547b965ae23b83a29957", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.631465+02:00", "timestamp": 1754049950.631465}}}
{"text": "2025-08-01 14:05:50.632 | DEBUG    | app.services.products.detail_service:get_product_details:35 - ✅ Cache hit produit:details pour produit:details:20980\n", "record": {"elapsed": {"repr": "0:02:03.693118", "seconds": 123.693118}, "exception": null, "extra": {}, "file": {"name": "detail_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\products\\detail_service.py"}, "function": "get_product_details", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 35, "message": "✅ Cache hit produit:details pour produit:details:20980", "module": "detail_service", "name": "app.services.products.detail_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.632780+02:00", "timestamp": 1754049950.63278}}}
{"text": "2025-08-01 14:05:50.634 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:abe6701bf637547b965ae23b83a29957\n", "record": {"elapsed": {"repr": "0:02:03.694473", "seconds": 123.694473}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:abe6701bf637547b965ae23b83a29957", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.634135+02:00", "timestamp": 1754049950.634135}}}
{"text": "2025-08-01 14:05:50.634 | DEBUG    | app.services.sales.sales_service:get_sales_aggregate:34 - ✅ Cache hit sales:agg pour sales:agg:20980\n", "record": {"elapsed": {"repr": "0:02:03.695289", "seconds": 123.695289}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_aggregate", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 34, "message": "✅ Cache hit sales:agg pour sales:agg:20980", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.634951+02:00", "timestamp": 1754049950.634951}}}
{"text": "2025-08-01 14:05:50.636 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:abe6701bf637547b965ae23b83a29957\n", "record": {"elapsed": {"repr": "0:02:03.697152", "seconds": 123.697152}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:abe6701bf637547b965ae23b83a29957", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.636814+02:00", "timestamp": 1754049950.636814}}}
{"text": "2025-08-01 14:05:50.637 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [20980], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:02:03.698301", "seconds": 123.698301}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [20980], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.637963+02:00", "timestamp": 1754049950.637963}}}
{"text": "2025-08-01 14:05:50.639 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:abe6701bf637547b965ae23b83a29957\n", "record": {"elapsed": {"repr": "0:02:03.699552", "seconds": 123.699552}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:abe6701bf637547b965ae23b83a29957", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.639214+02:00", "timestamp": 1754049950.639214}}}
{"text": "2025-08-01 14:05:50.640 | DEBUG    | app.services.stock.stock_service:get_stock_actuel:30 - ✅ Cache hit stock:actuel pour stock:actuel:20980\n", "record": {"elapsed": {"repr": "0:02:03.700566", "seconds": 123.700566}, "exception": null, "extra": {}, "file": {"name": "stock_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\stock\\stock_service.py"}, "function": "get_stock_actuel", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 30, "message": "✅ Cache hit stock:actuel pour stock:actuel:20980", "module": "stock_service", "name": "app.services.stock.stock_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.640228+02:00", "timestamp": 1754049950.640228}}}
{"text": "2025-08-01 14:05:50.641 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:abe6701bf637547b965ae23b83a29957\n", "record": {"elapsed": {"repr": "0:02:03.702057", "seconds": 123.702057}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:abe6701bf637547b965ae23b83a29957", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.641719+02:00", "timestamp": 1754049950.641719}}}
{"text": "2025-08-01 14:05:50.642 | DEBUG    | app.services.purchase.purchase_service:get_purchase_price:32 - ✅ Cache hit purchase_price pour purchase:price:20980\n", "record": {"elapsed": {"repr": "0:02:03.703097", "seconds": 123.703097}, "exception": null, "extra": {}, "file": {"name": "purchase_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\purchase\\purchase_service.py"}, "function": "get_purchase_price", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 32, "message": "✅ Cache hit purchase_price pour purchase:price:20980", "module": "purchase_service", "name": "app.services.purchase.purchase_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.642759+02:00", "timestamp": 1754049950.642759}}}
{"text": "2025-08-01 14:05:50.644 | INFO     | app.main:request_tracking_middleware:116 - ✅ [9f2415f8] POST /api/v1/dashboard/fiche - 200 - 20.7ms\n", "record": {"elapsed": {"repr": "0:02:03.705094", "seconds": 123.705094}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [9f2415f8] POST /api/v1/dashboard/fiche - 200 - 20.7ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.644756+02:00", "timestamp": 1754049950.644756}}}
{"text": "2025-08-01 14:05:50.703 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [e504434a] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:02:03.763742", "seconds": 123.763742}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [e504434a] GET /api/v1/suggestions/refcrn_by_codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.703404+02:00", "timestamp": 1754049950.703404}}}
{"text": "2025-08-01 14:05:50.706 | INFO     | app.main:request_tracking_middleware:116 - ✅ [e504434a] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 2.8ms\n", "record": {"elapsed": {"repr": "0:02:03.766484", "seconds": 123.766484}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [e504434a] GET /api/v1/suggestions/refcrn_by_codpro - 200 - 2.8ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:50.706146+02:00", "timestamp": 1754049950.706146}}}
{"text": "2025-08-01 14:05:51.542 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [ca5559f4] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:02:04.603145", "seconds": 124.603145}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [ca5559f4] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:51.542807+02:00", "timestamp": 1754049951.542807}}}
{"text": "2025-08-01 14:05:51.934 | INFO     | app.main:request_tracking_middleware:116 - ✅ [ca5559f4] GET /api/v1/suggestions/refint-codpro - 200 - 392.0ms\n", "record": {"elapsed": {"repr": "0:02:04.995131", "seconds": 124.995131}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [ca5559f4] GET /api/v1/suggestions/refint-codpro - 200 - 392.0ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:51.934793+02:00", "timestamp": 1754049951.934793}}}
{"text": "2025-08-01 14:05:53.871 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [cfc98934] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:02:06.932259", "seconds": 126.932259}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [cfc98934] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:53.871921+02:00", "timestamp": 1754049953.871921}}}
{"text": "2025-08-01 14:05:53.885 | INFO     | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:78 - 📌 Résolution via grouping_crn=13, qualite=None\n", "record": {"elapsed": {"repr": "0:02:06.945355", "seconds": 126.945355}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 78, "message": "📌 Résolution via grouping_crn=13, qualite=None", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:53.885017+02:00", "timestamp": 1754049953.885017}}}
{"text": "2025-08-01 14:05:53.897 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:101 - ✅ Cache enregistré pour 3 cod_pro\n", "record": {"elapsed": {"repr": "0:02:06.957680", "seconds": 126.95768}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 101, "message": "✅ Cache enregistré pour 3 cod_pro", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:53.897342+02:00", "timestamp": 1754049953.897342}}}
{"text": "2025-08-01 14:05:53.898 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:60 - ✅ Cache hit dashboard:products\n", "record": {"elapsed": {"repr": "0:02:06.959321", "seconds": 126.959321}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 60, "message": "✅ Cache hit dashboard:products", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:53.898983+02:00", "timestamp": 1754049953.898983}}}
{"text": "2025-08-01 14:05:53.900 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:64 - ✅ Cache hit dashboard:sales\n", "record": {"elapsed": {"repr": "0:02:06.961040", "seconds": 126.96104}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 64, "message": "✅ Cache hit dashboard:sales", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:53.900702+02:00", "timestamp": 1754049953.900702}}}
{"text": "2025-08-01 14:05:53.902 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:68 - ✅ Cache hit dashboard:stock\n", "record": {"elapsed": {"repr": "0:02:06.963260", "seconds": 126.96326}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 68, "message": "✅ Cache hit dashboard:stock", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:53.902922+02:00", "timestamp": 1754049953.902922}}}
{"text": "2025-08-01 14:05:53.904 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:72 - ✅ Cache hit dashboard:purchase\n", "record": {"elapsed": {"repr": "0:02:06.964792", "seconds": 126.964792}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 72, "message": "✅ Cache hit dashboard:purchase", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:53.904454+02:00", "timestamp": 1754049953.904454}}}
{"text": "2025-08-01 14:05:53.906 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:76 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:02:06.967245", "seconds": 126.967245}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 76, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:53.906907+02:00", "timestamp": 1754049953.906907}}}
{"text": "2025-08-01 14:05:53.909 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8\n", "record": {"elapsed": {"repr": "0:02:06.969731", "seconds": 126.969731}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:53.909393+02:00", "timestamp": 1754049953.909393}}}
{"text": "2025-08-01 14:05:53.910 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980, 465576], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:02:06.970800", "seconds": 126.9708}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980, 465576], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:53.910462+02:00", "timestamp": 1754049953.910462}}}
{"text": "2025-08-01 14:05:53.916 | INFO     | app.main:request_tracking_middleware:116 - ✅ [cfc98934] POST /api/v1/dashboard/fiche - 200 - 44.6ms\n", "record": {"elapsed": {"repr": "0:02:06.977106", "seconds": 126.977106}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [cfc98934] POST /api/v1/dashboard/fiche - 200 - 44.6ms", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:05:53.916768+02:00", "timestamp": 1754049953.916768}}}
{"text": "2025-08-01 14:10:42.604 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:06:55.664588", "seconds": 415.664588}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 16884, "name": "SpawnProcess-4"}, "thread": {"id": 8528, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:10:42.604250+02:00", "timestamp": 1754050242.60425}}}
{"text": "2025-08-01 14:10:48.573 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:01.634895", "seconds": 1.634895}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:10:48.573016+02:00", "timestamp": 1754050248.573016}}}
{"text": "2025-08-01 14:10:48.588 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:01.650033", "seconds": 1.650033}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:10:48.588154+02:00", "timestamp": 1754050248.588154}}}
{"text": "2025-08-01 14:10:48.588 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:01.650412", "seconds": 1.650412}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:10:48.588533+02:00", "timestamp": 1754050248.588533}}}
{"text": "2025-08-01 14:10:48.843 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:01.905064", "seconds": 1.905064}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:10:48.843185+02:00", "timestamp": 1754050248.843185}}}
{"text": "2025-08-01 14:10:48.843 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:01.905635", "seconds": 1.905635}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:10:48.843756+02:00", "timestamp": 1754050248.843756}}}
{"text": "2025-08-01 14:12:37.743 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [ef797a55] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:50.805566", "seconds": 110.805566}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [ef797a55] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:37.743687+02:00", "timestamp": 1754050357.743687}}}
{"text": "2025-08-01 14:12:37.753 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [d033d4f8] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:50.814995", "seconds": 110.814995}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [d033d4f8] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:37.753116+02:00", "timestamp": 1754050357.753116}}}
{"text": "2025-08-01 14:12:37.763 | INFO     | app.main:request_tracking_middleware:116 - ✅ [d033d4f8] POST /api/v1/dashboard/fiche - 200 - 10.7ms\n", "record": {"elapsed": {"repr": "0:01:50.825823", "seconds": 110.825823}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [d033d4f8] POST /api/v1/dashboard/fiche - 200 - 10.7ms", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:37.763944+02:00", "timestamp": 1754050357.763944}}}
{"text": "2025-08-01 14:12:37.995 | INFO     | app.main:request_tracking_middleware:116 - ✅ [ef797a55] GET /api/v1/suggestions/refint-codpro - 200 - 251.6ms\n", "record": {"elapsed": {"repr": "0:01:51.057123", "seconds": 111.057123}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [ef797a55] GET /api/v1/suggestions/refint-codpro - 200 - 251.6ms", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:37.995244+02:00", "timestamp": 1754050357.995244}}}
{"text": "2025-08-01 14:12:47.415 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [b5fac9f4] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:02:00.477689", "seconds": 120.477689}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [b5fac9f4] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:47.415810+02:00", "timestamp": 1754050367.41581}}}
{"text": "2025-08-01 14:12:47.439 | INFO     | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:78 - 📌 Résolution via grouping_crn=13, qualite=None\n", "record": {"elapsed": {"repr": "0:02:00.501426", "seconds": 120.501426}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 78, "message": "📌 Résolution via grouping_crn=13, qualite=None", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:47.439547+02:00", "timestamp": 1754050367.439547}}}
{"text": "2025-08-01 14:12:47.451 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:101 - ✅ Cache enregistré pour 3 cod_pro\n", "record": {"elapsed": {"repr": "0:02:00.512948", "seconds": 120.512948}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 101, "message": "✅ Cache enregistré pour 3 cod_pro", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:47.451069+02:00", "timestamp": 1754050367.451069}}}
{"text": "2025-08-01 14:12:47.452 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:60 - ✅ Cache hit dashboard:products\n", "record": {"elapsed": {"repr": "0:02:00.514245", "seconds": 120.514245}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 60, "message": "✅ Cache hit dashboard:products", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:47.452366+02:00", "timestamp": 1754050367.452366}}}
{"text": "2025-08-01 14:12:47.453 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:64 - ✅ Cache hit dashboard:sales\n", "record": {"elapsed": {"repr": "0:02:00.515556", "seconds": 120.515556}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 64, "message": "✅ Cache hit dashboard:sales", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:47.453677+02:00", "timestamp": 1754050367.453677}}}
{"text": "2025-08-01 14:12:47.455 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:68 - ✅ Cache hit dashboard:stock\n", "record": {"elapsed": {"repr": "0:02:00.516969", "seconds": 120.516969}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 68, "message": "✅ Cache hit dashboard:stock", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:47.455090+02:00", "timestamp": 1754050367.45509}}}
{"text": "2025-08-01 14:12:47.456 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:72 - ✅ Cache hit dashboard:purchase\n", "record": {"elapsed": {"repr": "0:02:00.518461", "seconds": 120.518461}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 72, "message": "✅ Cache hit dashboard:purchase", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:47.456582+02:00", "timestamp": 1754050367.456582}}}
{"text": "2025-08-01 14:12:47.457 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:76 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:02:00.519770", "seconds": 120.51977}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 76, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:47.457891+02:00", "timestamp": 1754050367.457891}}}
{"text": "2025-08-01 14:12:47.459 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8\n", "record": {"elapsed": {"repr": "0:02:00.521300", "seconds": 120.5213}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:4bed93003a95e04773260320de6d0ec8", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:47.459421+02:00", "timestamp": 1754050367.459421}}}
{"text": "2025-08-01 14:12:47.460 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980, 465576], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:02:00.522467", "seconds": 120.522467}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980, 465576], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:47.460588+02:00", "timestamp": 1754050367.460588}}}
{"text": "2025-08-01 14:12:47.465 | INFO     | app.main:request_tracking_middleware:116 - ✅ [b5fac9f4] POST /api/v1/dashboard/fiche - 200 - 49.6ms\n", "record": {"elapsed": {"repr": "0:02:00.527301", "seconds": 120.527301}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [b5fac9f4] POST /api/v1/dashboard/fiche - 200 - 49.6ms", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:12:47.465422+02:00", "timestamp": 1754050367.465422}}}
{"text": "2025-08-01 14:13:00.683 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [c5ae07b8] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:02:13.745351", "seconds": 133.745351}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [c5ae07b8] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:00.683472+02:00", "timestamp": 1754050380.683472}}}
{"text": "2025-08-01 14:13:00.688 | INFO     | app.main:request_tracking_middleware:116 - ✅ [c5ae07b8] POST /api/v1/dashboard/fiche - 200 - 4.9ms\n", "record": {"elapsed": {"repr": "0:02:13.750231", "seconds": 133.750231}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [c5ae07b8] POST /api/v1/dashboard/fiche - 200 - 4.9ms", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:00.688352+02:00", "timestamp": 1754050380.688352}}}
{"text": "2025-08-01 14:13:00.697 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [ad7bac05] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:02:13.759705", "seconds": 133.759705}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [ad7bac05] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:00.697826+02:00", "timestamp": 1754050380.697826}}}
{"text": "2025-08-01 14:13:01.021 | INFO     | app.main:request_tracking_middleware:116 - ✅ [ad7bac05] GET /api/v1/suggestions/refint-codpro - 200 - 323.2ms\n", "record": {"elapsed": {"repr": "0:02:14.082933", "seconds": 134.082933}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [ad7bac05] GET /api/v1/suggestions/refint-codpro - 200 - 323.2ms", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:01.021054+02:00", "timestamp": 1754050381.021054}}}
{"text": "2025-08-01 14:13:04.903 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [766f772c] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:02:17.965460", "seconds": 137.96546}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [766f772c] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:04.903581+02:00", "timestamp": 1754050384.903581}}}
{"text": "2025-08-01 14:13:04.922 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [ecf40066] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:02:17.984604", "seconds": 137.984604}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [ecf40066] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:04.922725+02:00", "timestamp": 1754050384.922725}}}
{"text": "2025-08-01 14:13:04.926 | INFO     | app.main:request_tracking_middleware:116 - ✅ [ecf40066] POST /api/v1/dashboard/fiche - 200 - 4.1ms\n", "record": {"elapsed": {"repr": "0:02:17.988706", "seconds": 137.988706}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [ecf40066] POST /api/v1/dashboard/fiche - 200 - 4.1ms", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:04.926827+02:00", "timestamp": 1754050384.926827}}}
{"text": "2025-08-01 14:13:05.150 | INFO     | app.main:request_tracking_middleware:116 - ✅ [766f772c] GET /api/v1/suggestions/refint-codpro - 200 - 246.7ms\n", "record": {"elapsed": {"repr": "0:02:18.212138", "seconds": 138.212138}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [766f772c] GET /api/v1/suggestions/refint-codpro - 200 - 246.7ms", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:05.150259+02:00", "timestamp": 1754050385.150259}}}
{"text": "2025-08-01 14:13:07.753 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [a1ff131d] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:02:20.815760", "seconds": 140.81576}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [a1ff131d] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:07.753881+02:00", "timestamp": 1754050387.753881}}}
{"text": "2025-08-01 14:13:07.945 | INFO     | app.main:request_tracking_middleware:116 - ✅ [a1ff131d] GET /api/v1/suggestions/refint-codpro - 200 - 191.9ms\n", "record": {"elapsed": {"repr": "0:02:21.007684", "seconds": 141.007684}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [a1ff131d] GET /api/v1/suggestions/refint-codpro - 200 - 191.9ms", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:07.945805+02:00", "timestamp": 1754050387.945805}}}
{"text": "2025-08-01 14:13:08.691 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [59453cca] POST /api/v1/dashboard/fiche - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:02:21.753367", "seconds": 141.753367}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [59453cca] POST /api/v1/dashboard/fiche - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:08.691488+02:00", "timestamp": 1754050388.691488}}}
{"text": "2025-08-01 14:13:08.713 | INFO     | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:78 - 📌 Résolution via grouping_crn=13, qualite=PMQ\n", "record": {"elapsed": {"repr": "0:02:21.775412", "seconds": 141.775412}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 78, "message": "📌 Résolution via grouping_crn=13, qualite=PMQ", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:08.713533+02:00", "timestamp": 1754050388.713533}}}
{"text": "2025-08-01 14:13:08.724 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:101 - ✅ Cache enregistré pour 2 cod_pro\n", "record": {"elapsed": {"repr": "0:02:21.786331", "seconds": 141.786331}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 101, "message": "✅ Cache enregistré pour 2 cod_pro", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:08.724452+02:00", "timestamp": 1754050388.724452}}}
{"text": "2025-08-01 14:13:08.725 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:60 - ✅ Cache hit dashboard:products\n", "record": {"elapsed": {"repr": "0:02:21.787762", "seconds": 141.787762}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 60, "message": "✅ Cache hit dashboard:products", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:08.725883+02:00", "timestamp": 1754050388.725883}}}
{"text": "2025-08-01 14:13:08.726 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:64 - ✅ Cache hit dashboard:sales\n", "record": {"elapsed": {"repr": "0:02:21.788775", "seconds": 141.788775}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 64, "message": "✅ Cache hit dashboard:sales", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:08.726896+02:00", "timestamp": 1754050388.726896}}}
{"text": "2025-08-01 14:13:08.728 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:68 - ✅ Cache hit dashboard:stock\n", "record": {"elapsed": {"repr": "0:02:21.789922", "seconds": 141.789922}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 68, "message": "✅ Cache hit dashboard:stock", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:08.728043+02:00", "timestamp": 1754050388.728043}}}
{"text": "2025-08-01 14:13:08.729 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:72 - ✅ Cache hit dashboard:purchase\n", "record": {"elapsed": {"repr": "0:02:21.791201", "seconds": 141.791201}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 72, "message": "✅ Cache hit dashboard:purchase", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:08.729322+02:00", "timestamp": 1754050388.729322}}}
{"text": "2025-08-01 14:13:08.730 | DEBUG    | app.services.dashboard.dashboard_service:get_dashboard_fiche:76 - ✅ Cache hit dashboard:matches\n", "record": {"elapsed": {"repr": "0:02:21.792379", "seconds": 141.792379}, "exception": null, "extra": {}, "file": {"name": "dashboard_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\dashboard\\dashboard_service.py"}, "function": "get_dashboard_fiche", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 76, "message": "✅ Cache hit dashboard:matches", "module": "dashboard_service", "name": "app.services.dashboard.dashboard_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:08.730500+02:00", "timestamp": 1754050388.7305}}}
{"text": "2025-08-01 14:13:08.731 | DEBUG    | app.services.identifiers.identifier_service:get_codpro_list_from_identifier:29 - ✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639\n", "record": {"elapsed": {"repr": "0:02:21.793410", "seconds": 141.79341}, "exception": null, "extra": {}, "file": {"name": "identifier_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\identifiers\\identifier_service.py"}, "function": "get_codpro_list_from_identifier", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 29, "message": "✅ Cache hit pour resolve_codpro:7d13c6e105044f4d489f724e51e1a639", "module": "identifier_service", "name": "app.services.identifiers.identifier_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:08.731531+02:00", "timestamp": 1754050388.731531}}}
{"text": "2025-08-01 14:13:08.732 | DEBUG    | app.services.sales.sales_service:get_sales_history:114 - ✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980], \"min_period\": \"2024-09-01\"}\n", "record": {"elapsed": {"repr": "0:02:21.794611", "seconds": 141.794611}, "exception": null, "extra": {}, "file": {"name": "sales_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\sales\\sales_service.py"}, "function": "get_sales_history", "level": {"icon": "🐞", "name": "DEBUG", "no": 10}, "line": 114, "message": "✅ Cache hit sales:history pour sales:history:{\"cod_pro_list\": [700, 20980], \"min_period\": \"2024-09-01\"}", "module": "sales_service", "name": "app.services.sales.sales_service", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:08.732732+02:00", "timestamp": 1754050388.732732}}}
{"text": "2025-08-01 14:13:08.739 | INFO     | app.main:request_tracking_middleware:116 - ✅ [59453cca] POST /api/v1/dashboard/fiche - 200 - 48.1ms\n", "record": {"elapsed": {"repr": "0:02:21.801482", "seconds": 141.801482}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [59453cca] POST /api/v1/dashboard/fiche - 200 - 48.1ms", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:08.739603+02:00", "timestamp": 1754050388.739603}}}
{"text": "2025-08-01 14:13:23.945 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:02:37.007750", "seconds": 157.00775}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 17116, "name": "SpawnProcess-6"}, "thread": {"id": 18892, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:23.945871+02:00", "timestamp": 1754050403.945871}}}
{"text": "2025-08-01 14:13:26.816 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.680540", "seconds": 0.68054}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 10552, "name": "SpawnProcess-7"}, "thread": {"id": 16648, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:26.816668+02:00", "timestamp": 1754050406.816668}}}
{"text": "2025-08-01 14:13:26.831 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.695125", "seconds": 0.695125}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 10552, "name": "SpawnProcess-7"}, "thread": {"id": 16648, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:26.831253+02:00", "timestamp": 1754050406.831253}}}
{"text": "2025-08-01 14:13:26.831 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.695730", "seconds": 0.69573}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 10552, "name": "SpawnProcess-7"}, "thread": {"id": 16648, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:26.831858+02:00", "timestamp": 1754050406.831858}}}
{"text": "2025-08-01 14:13:27.107 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.971163", "seconds": 0.971163}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 10552, "name": "SpawnProcess-7"}, "thread": {"id": 16648, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:27.107291+02:00", "timestamp": 1754050407.107291}}}
{"text": "2025-08-01 14:13:27.108 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.972210", "seconds": 0.97221}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 10552, "name": "SpawnProcess-7"}, "thread": {"id": 16648, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:13:27.108338+02:00", "timestamp": 1754050407.108338}}}
{"text": "2025-08-01 14:14:25.590 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:00:59.454780", "seconds": 59.45478}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 10552, "name": "SpawnProcess-7"}, "thread": {"id": 16648, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:14:25.590908+02:00", "timestamp": 1754050465.590908}}}
{"text": "2025-08-01 14:14:28.202 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.677256", "seconds": 0.677256}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 15812, "name": "SpawnProcess-8"}, "thread": {"id": 7868, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:14:28.202964+02:00", "timestamp": 1754050468.202964}}}
{"text": "2025-08-01 14:14:28.227 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.701778", "seconds": 0.701778}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 15812, "name": "SpawnProcess-8"}, "thread": {"id": 7868, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:14:28.227486+02:00", "timestamp": 1754050468.227486}}}
{"text": "2025-08-01 14:14:28.228 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.702456", "seconds": 0.702456}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 15812, "name": "SpawnProcess-8"}, "thread": {"id": 7868, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:14:28.228164+02:00", "timestamp": 1754050468.228164}}}
{"text": "2025-08-01 14:14:28.495 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.970206", "seconds": 0.970206}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 15812, "name": "SpawnProcess-8"}, "thread": {"id": 7868, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:14:28.495914+02:00", "timestamp": 1754050468.495914}}}
{"text": "2025-08-01 14:14:28.496 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.970832", "seconds": 0.970832}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 15812, "name": "SpawnProcess-8"}, "thread": {"id": 7868, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:14:28.496540+02:00", "timestamp": 1754050468.49654}}}
{"text": "2025-08-01 14:14:37.615 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:00:10.090010", "seconds": 10.09001}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 15812, "name": "SpawnProcess-8"}, "thread": {"id": 7868, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:14:37.615718+02:00", "timestamp": 1754050477.615718}}}
{"text": "2025-08-01 14:14:41.525 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.734566", "seconds": 0.734566}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 7696, "name": "SpawnProcess-10"}, "thread": {"id": 14132, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:14:41.525700+02:00", "timestamp": 1754050481.5257}}}
{"text": "2025-08-01 14:14:41.536 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.745193", "seconds": 0.745193}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 7696, "name": "SpawnProcess-10"}, "thread": {"id": 14132, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:14:41.536327+02:00", "timestamp": 1754050481.536327}}}
{"text": "2025-08-01 14:14:41.536 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.745647", "seconds": 0.745647}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 7696, "name": "SpawnProcess-10"}, "thread": {"id": 14132, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:14:41.536781+02:00", "timestamp": 1754050481.536781}}}
{"text": "2025-08-01 14:14:41.776 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.985816", "seconds": 0.985816}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 7696, "name": "SpawnProcess-10"}, "thread": {"id": 14132, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:14:41.776950+02:00", "timestamp": 1754050481.77695}}}
{"text": "2025-08-01 14:14:41.777 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.986642", "seconds": 0.986642}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 7696, "name": "SpawnProcess-10"}, "thread": {"id": 14132, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:14:41.777776+02:00", "timestamp": 1754050481.777776}}}
{"text": "2025-08-01 14:15:54.198 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:01:13.407311", "seconds": 73.407311}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 7696, "name": "SpawnProcess-10"}, "thread": {"id": 14132, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:15:54.198445+02:00", "timestamp": 1754050554.198445}}}
{"text": "2025-08-01 14:15:58.543 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.767730", "seconds": 0.76773}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 18024, "name": "SpawnProcess-11"}, "thread": {"id": 8336, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:15:58.543954+02:00", "timestamp": 1754050558.543954}}}
{"text": "2025-08-01 14:15:58.555 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.779516", "seconds": 0.779516}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 18024, "name": "SpawnProcess-11"}, "thread": {"id": 8336, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:15:58.555740+02:00", "timestamp": 1754050558.55574}}}
{"text": "2025-08-01 14:15:58.556 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.780070", "seconds": 0.78007}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 18024, "name": "SpawnProcess-11"}, "thread": {"id": 8336, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:15:58.556294+02:00", "timestamp": 1754050558.556294}}}
{"text": "2025-08-01 14:15:58.863 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:01.087492", "seconds": 1.087492}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 18024, "name": "SpawnProcess-11"}, "thread": {"id": 8336, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:15:58.863716+02:00", "timestamp": 1754050558.863716}}}
{"text": "2025-08-01 14:15:58.864 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:01.088169", "seconds": 1.088169}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 18024, "name": "SpawnProcess-11"}, "thread": {"id": 8336, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:15:58.864393+02:00", "timestamp": 1754050558.864393}}}
{"text": "2025-08-01 14:16:19.422 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:00:21.646031", "seconds": 21.646031}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 18024, "name": "SpawnProcess-11"}, "thread": {"id": 8336, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:16:19.422255+02:00", "timestamp": 1754050579.422255}}}
{"text": "2025-08-01 14:16:22.319 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.792554", "seconds": 0.792554}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 5420, "name": "SpawnProcess-12"}, "thread": {"id": 12508, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:16:22.319587+02:00", "timestamp": 1754050582.319587}}}
{"text": "2025-08-01 14:16:22.334 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.807832", "seconds": 0.807832}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 5420, "name": "SpawnProcess-12"}, "thread": {"id": 12508, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:16:22.334865+02:00", "timestamp": 1754050582.334865}}}
{"text": "2025-08-01 14:16:22.335 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.808283", "seconds": 0.808283}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 5420, "name": "SpawnProcess-12"}, "thread": {"id": 12508, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:16:22.335316+02:00", "timestamp": 1754050582.335316}}}
{"text": "2025-08-01 14:16:22.585 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:01.058818", "seconds": 1.058818}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 5420, "name": "SpawnProcess-12"}, "thread": {"id": 12508, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:16:22.585851+02:00", "timestamp": 1754050582.585851}}}
{"text": "2025-08-01 14:16:22.586 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:01.059588", "seconds": 1.059588}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 5420, "name": "SpawnProcess-12"}, "thread": {"id": 12508, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:16:22.586621+02:00", "timestamp": 1754050582.586621}}}
{"text": "2025-08-01 14:17:02.442 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:00:40.915423", "seconds": 40.915423}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 5420, "name": "SpawnProcess-12"}, "thread": {"id": 12508, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:17:02.442456+02:00", "timestamp": 1754050622.442456}}}
{"text": "2025-08-01 14:17:05.472 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.843095", "seconds": 0.843095}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 18696, "name": "SpawnProcess-13"}, "thread": {"id": 15388, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:17:05.472632+02:00", "timestamp": 1754050625.472632}}}
{"text": "2025-08-01 14:17:05.490 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.860873", "seconds": 0.860873}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 18696, "name": "SpawnProcess-13"}, "thread": {"id": 15388, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:17:05.490410+02:00", "timestamp": 1754050625.49041}}}
{"text": "2025-08-01 14:17:05.491 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.861526", "seconds": 0.861526}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 18696, "name": "SpawnProcess-13"}, "thread": {"id": 15388, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:17:05.491063+02:00", "timestamp": 1754050625.491063}}}
{"text": "2025-08-01 14:17:05.838 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:01.209272", "seconds": 1.209272}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 18696, "name": "SpawnProcess-13"}, "thread": {"id": 15388, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:17:05.838809+02:00", "timestamp": 1754050625.838809}}}
{"text": "2025-08-01 14:17:05.839 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:01.209865", "seconds": 1.209865}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 18696, "name": "SpawnProcess-13"}, "thread": {"id": 15388, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:17:05.839402+02:00", "timestamp": 1754050625.839402}}}
{"text": "2025-08-01 14:17:11.796 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:00:07.166988", "seconds": 7.166988}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 18696, "name": "SpawnProcess-13"}, "thread": {"id": 15388, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:17:11.796525+02:00", "timestamp": 1754050631.796525}}}
{"text": "2025-08-01 14:17:15.168 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.757138", "seconds": 0.757138}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 15972, "name": "SpawnProcess-15"}, "thread": {"id": 5664, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:17:15.168391+02:00", "timestamp": 1754050635.168391}}}
{"text": "2025-08-01 14:17:15.178 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.767107", "seconds": 0.767107}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 15972, "name": "SpawnProcess-15"}, "thread": {"id": 5664, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:17:15.178360+02:00", "timestamp": 1754050635.17836}}}
{"text": "2025-08-01 14:17:15.178 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.767499", "seconds": 0.767499}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 15972, "name": "SpawnProcess-15"}, "thread": {"id": 5664, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:17:15.178752+02:00", "timestamp": 1754050635.178752}}}
{"text": "2025-08-01 14:17:15.385 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.974106", "seconds": 0.974106}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 15972, "name": "SpawnProcess-15"}, "thread": {"id": 5664, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:17:15.385359+02:00", "timestamp": 1754050635.385359}}}
{"text": "2025-08-01 14:17:15.385 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.974634", "seconds": 0.974634}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 15972, "name": "SpawnProcess-15"}, "thread": {"id": 5664, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:17:15.385887+02:00", "timestamp": 1754050635.385887}}}
{"text": "2025-08-01 14:18:47.808 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:01:33.397587", "seconds": 93.397587}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 15972, "name": "SpawnProcess-15"}, "thread": {"id": 5664, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:18:47.808840+02:00", "timestamp": 1754050727.80884}}}
{"text": "2025-08-01 14:18:50.552 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.743031", "seconds": 0.743031}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 12512, "name": "SpawnProcess-16"}, "thread": {"id": 15584, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:18:50.552290+02:00", "timestamp": 1754050730.55229}}}
{"text": "2025-08-01 14:18:50.568 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.759135", "seconds": 0.759135}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 12512, "name": "SpawnProcess-16"}, "thread": {"id": 15584, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:18:50.568394+02:00", "timestamp": 1754050730.568394}}}
{"text": "2025-08-01 14:18:50.569 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.760640", "seconds": 0.76064}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 12512, "name": "SpawnProcess-16"}, "thread": {"id": 15584, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:18:50.569899+02:00", "timestamp": 1754050730.569899}}}
{"text": "2025-08-01 14:18:50.761 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.952549", "seconds": 0.952549}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 12512, "name": "SpawnProcess-16"}, "thread": {"id": 15584, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:18:50.761808+02:00", "timestamp": 1754050730.761808}}}
{"text": "2025-08-01 14:18:50.762 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.953142", "seconds": 0.953142}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 12512, "name": "SpawnProcess-16"}, "thread": {"id": 15584, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:18:50.762401+02:00", "timestamp": 1754050730.762401}}}
{"text": "2025-08-01 14:19:26.823 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:00:37.014111", "seconds": 37.014111}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 12512, "name": "SpawnProcess-16"}, "thread": {"id": 15584, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:19:26.823370+02:00", "timestamp": 1754050766.82337}}}
{"text": "2025-08-01 14:19:29.974 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.660384", "seconds": 0.660384}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 15392, "name": "SpawnProcess-18"}, "thread": {"id": 17432, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:19:29.974271+02:00", "timestamp": 1754050769.974271}}}
{"text": "2025-08-01 14:19:29.989 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.675349", "seconds": 0.675349}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 15392, "name": "SpawnProcess-18"}, "thread": {"id": 17432, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:19:29.989236+02:00", "timestamp": 1754050769.989236}}}
{"text": "2025-08-01 14:19:29.989 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.676065", "seconds": 0.676065}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 15392, "name": "SpawnProcess-18"}, "thread": {"id": 17432, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:19:29.989952+02:00", "timestamp": 1754050769.989952}}}
{"text": "2025-08-01 14:19:30.174 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.860508", "seconds": 0.860508}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 15392, "name": "SpawnProcess-18"}, "thread": {"id": 17432, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:19:30.174395+02:00", "timestamp": 1754050770.174395}}}
{"text": "2025-08-01 14:19:30.174 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.861004", "seconds": 0.861004}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 15392, "name": "SpawnProcess-18"}, "thread": {"id": 17432, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:19:30.174891+02:00", "timestamp": 1754050770.174891}}}
{"text": "2025-08-01 14:20:12.436 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:00:43.122612", "seconds": 43.122612}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 15392, "name": "SpawnProcess-18"}, "thread": {"id": 17432, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:20:12.436499+02:00", "timestamp": 1754050812.436499}}}
{"text": "2025-08-01 14:20:15.800 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.644348", "seconds": 0.644348}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 15384, "name": "SpawnProcess-19"}, "thread": {"id": 14284, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:20:15.800928+02:00", "timestamp": 1754050815.800928}}}
{"text": "2025-08-01 14:20:15.812 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.656406", "seconds": 0.656406}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 15384, "name": "SpawnProcess-19"}, "thread": {"id": 14284, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:20:15.812986+02:00", "timestamp": 1754050815.812986}}}
{"text": "2025-08-01 14:20:15.813 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.656964", "seconds": 0.656964}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 15384, "name": "SpawnProcess-19"}, "thread": {"id": 14284, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:20:15.813544+02:00", "timestamp": 1754050815.813544}}}
{"text": "2025-08-01 14:20:16.104 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.947772", "seconds": 0.947772}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 15384, "name": "SpawnProcess-19"}, "thread": {"id": 14284, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:20:16.104352+02:00", "timestamp": 1754050816.104352}}}
{"text": "2025-08-01 14:20:16.104 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.948289", "seconds": 0.948289}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 15384, "name": "SpawnProcess-19"}, "thread": {"id": 14284, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:20:16.104869+02:00", "timestamp": 1754050816.104869}}}
{"text": "2025-08-01 14:20:22.375 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:00:07.219332", "seconds": 7.219332}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 15384, "name": "SpawnProcess-19"}, "thread": {"id": 14284, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:20:22.375912+02:00", "timestamp": 1754050822.375912}}}
{"text": "2025-08-01 14:20:25.201 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.669866", "seconds": 0.669866}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 1460, "name": "SpawnProcess-20"}, "thread": {"id": 14484, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:20:25.201220+02:00", "timestamp": 1754050825.20122}}}
{"text": "2025-08-01 14:20:25.213 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.682275", "seconds": 0.682275}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 1460, "name": "SpawnProcess-20"}, "thread": {"id": 14484, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:20:25.213629+02:00", "timestamp": 1754050825.213629}}}
{"text": "2025-08-01 14:20:25.214 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.682956", "seconds": 0.682956}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 1460, "name": "SpawnProcess-20"}, "thread": {"id": 14484, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:20:25.214310+02:00", "timestamp": 1754050825.21431}}}
{"text": "2025-08-01 14:20:25.430 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.898936", "seconds": 0.898936}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 1460, "name": "SpawnProcess-20"}, "thread": {"id": 14484, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:20:25.430290+02:00", "timestamp": 1754050825.43029}}}
{"text": "2025-08-01 14:20:25.431 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.899747", "seconds": 0.899747}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 1460, "name": "SpawnProcess-20"}, "thread": {"id": 14484, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:20:25.431101+02:00", "timestamp": 1754050825.431101}}}
{"text": "2025-08-01 14:21:24.554 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:01:00.023357", "seconds": 60.023357}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 1460, "name": "SpawnProcess-20"}, "thread": {"id": 14484, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:21:24.554711+02:00", "timestamp": 1754050884.554711}}}
{"text": "2025-08-01 14:21:27.041 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.633452", "seconds": 0.633452}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 7484, "name": "SpawnProcess-21"}, "thread": {"id": 8632, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:21:27.041049+02:00", "timestamp": 1754050887.041049}}}
{"text": "2025-08-01 14:21:27.063 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.655507", "seconds": 0.655507}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 7484, "name": "SpawnProcess-21"}, "thread": {"id": 8632, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:21:27.063104+02:00", "timestamp": 1754050887.063104}}}
{"text": "2025-08-01 14:21:27.064 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.656424", "seconds": 0.656424}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 7484, "name": "SpawnProcess-21"}, "thread": {"id": 8632, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:21:27.064021+02:00", "timestamp": 1754050887.064021}}}
{"text": "2025-08-01 14:21:27.231 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.824220", "seconds": 0.82422}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 7484, "name": "SpawnProcess-21"}, "thread": {"id": 8632, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:21:27.231817+02:00", "timestamp": 1754050887.231817}}}
{"text": "2025-08-01 14:21:27.232 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.824648", "seconds": 0.824648}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 7484, "name": "SpawnProcess-21"}, "thread": {"id": 8632, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:21:27.232245+02:00", "timestamp": 1754050887.232245}}}
{"text": "2025-08-01 14:22:33.097 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:01:06.689559", "seconds": 66.689559}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 7484, "name": "SpawnProcess-21"}, "thread": {"id": 8632, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:22:33.097156+02:00", "timestamp": 1754050953.097156}}}
{"text": "2025-08-01 14:22:36.195 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.698239", "seconds": 0.698239}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 5288, "name": "SpawnProcess-23"}, "thread": {"id": 7780, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:22:36.195060+02:00", "timestamp": 1754050956.19506}}}
{"text": "2025-08-01 14:22:36.210 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.713699", "seconds": 0.713699}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 5288, "name": "SpawnProcess-23"}, "thread": {"id": 7780, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:22:36.210520+02:00", "timestamp": 1754050956.21052}}}
{"text": "2025-08-01 14:22:36.211 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.714221", "seconds": 0.714221}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 5288, "name": "SpawnProcess-23"}, "thread": {"id": 7780, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:22:36.211042+02:00", "timestamp": 1754050956.211042}}}
{"text": "2025-08-01 14:22:36.413 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.916235", "seconds": 0.916235}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 5288, "name": "SpawnProcess-23"}, "thread": {"id": 7780, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:22:36.413056+02:00", "timestamp": 1754050956.413056}}}
{"text": "2025-08-01 14:22:36.413 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.916744", "seconds": 0.916744}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 5288, "name": "SpawnProcess-23"}, "thread": {"id": 7780, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:22:36.413565+02:00", "timestamp": 1754050956.413565}}}
{"text": "2025-08-01 14:23:58.577 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:01:23.080956", "seconds": 83.080956}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 5288, "name": "SpawnProcess-23"}, "thread": {"id": 7780, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:23:58.577777+02:00", "timestamp": 1754051038.577777}}}
{"text": "2025-08-01 14:24:01.404 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.697879", "seconds": 0.697879}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 9476, "name": "SpawnProcess-24"}, "thread": {"id": 2992, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:24:01.404025+02:00", "timestamp": 1754051041.404025}}}
{"text": "2025-08-01 14:24:01.419 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.713477", "seconds": 0.713477}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 9476, "name": "SpawnProcess-24"}, "thread": {"id": 2992, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:24:01.419623+02:00", "timestamp": 1754051041.419623}}}
{"text": "2025-08-01 14:24:01.420 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.714124", "seconds": 0.714124}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 9476, "name": "SpawnProcess-24"}, "thread": {"id": 2992, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:24:01.420270+02:00", "timestamp": 1754051041.42027}}}
{"text": "2025-08-01 14:24:01.625 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.919093", "seconds": 0.919093}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 9476, "name": "SpawnProcess-24"}, "thread": {"id": 2992, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:24:01.625239+02:00", "timestamp": 1754051041.625239}}}
{"text": "2025-08-01 14:24:01.625 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.919698", "seconds": 0.919698}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 9476, "name": "SpawnProcess-24"}, "thread": {"id": 2992, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:24:01.625844+02:00", "timestamp": 1754051041.625844}}}
{"text": "2025-08-01 14:25:52.272 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:01:51.566327", "seconds": 111.566327}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 9476, "name": "SpawnProcess-24"}, "thread": {"id": 2992, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:25:52.272473+02:00", "timestamp": 1754051152.272473}}}
{"text": "2025-08-01 14:25:55.712 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.640240", "seconds": 0.64024}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 6948, "name": "SpawnProcess-26"}, "thread": {"id": 18688, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:25:55.712527+02:00", "timestamp": 1754051155.712527}}}
{"text": "2025-08-01 14:25:55.723 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.651256", "seconds": 0.651256}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 6948, "name": "SpawnProcess-26"}, "thread": {"id": 18688, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:25:55.723543+02:00", "timestamp": 1754051155.723543}}}
{"text": "2025-08-01 14:25:55.724 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.651822", "seconds": 0.651822}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 6948, "name": "SpawnProcess-26"}, "thread": {"id": 18688, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:25:55.724109+02:00", "timestamp": 1754051155.724109}}}
{"text": "2025-08-01 14:25:55.987 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.915541", "seconds": 0.915541}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 6948, "name": "SpawnProcess-26"}, "thread": {"id": 18688, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:25:55.987828+02:00", "timestamp": 1754051155.987828}}}
{"text": "2025-08-01 14:25:55.988 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.916280", "seconds": 0.91628}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 6948, "name": "SpawnProcess-26"}, "thread": {"id": 18688, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:25:55.988567+02:00", "timestamp": 1754051155.988567}}}
{"text": "2025-08-01 14:28:41.924 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:02:46.851872", "seconds": 166.851872}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 6948, "name": "SpawnProcess-26"}, "thread": {"id": 18688, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:28:41.924159+02:00", "timestamp": 1754051321.924159}}}
{"text": "2025-08-01 14:28:45.539 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.697152", "seconds": 0.697152}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 15104, "name": "SpawnProcess-28"}, "thread": {"id": 15884, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:28:45.539163+02:00", "timestamp": 1754051325.539163}}}
{"text": "2025-08-01 14:28:45.552 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.710511", "seconds": 0.710511}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 15104, "name": "SpawnProcess-28"}, "thread": {"id": 15884, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:28:45.552522+02:00", "timestamp": 1754051325.552522}}}
{"text": "2025-08-01 14:28:45.553 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.711325", "seconds": 0.711325}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 15104, "name": "SpawnProcess-28"}, "thread": {"id": 15884, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:28:45.553336+02:00", "timestamp": 1754051325.553336}}}
{"text": "2025-08-01 14:28:45.755 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.913156", "seconds": 0.913156}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 15104, "name": "SpawnProcess-28"}, "thread": {"id": 15884, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:28:45.755167+02:00", "timestamp": 1754051325.755167}}}
{"text": "2025-08-01 14:28:45.755 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.913754", "seconds": 0.913754}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 15104, "name": "SpawnProcess-28"}, "thread": {"id": 15884, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:28:45.755765+02:00", "timestamp": 1754051325.755765}}}
{"text": "2025-08-01 14:29:49.589 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:01:04.747794", "seconds": 64.747794}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 15104, "name": "SpawnProcess-28"}, "thread": {"id": 15884, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:29:49.589805+02:00", "timestamp": 1754051389.589805}}}
{"text": "2025-08-01 14:29:52.683 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.721273", "seconds": 0.721273}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 1980, "name": "SpawnProcess-29"}, "thread": {"id": 16272, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:29:52.683342+02:00", "timestamp": 1754051392.683342}}}
{"text": "2025-08-01 14:29:52.701 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.738972", "seconds": 0.738972}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 1980, "name": "SpawnProcess-29"}, "thread": {"id": 16272, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:29:52.701041+02:00", "timestamp": 1754051392.701041}}}
{"text": "2025-08-01 14:29:52.701 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.739477", "seconds": 0.739477}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 1980, "name": "SpawnProcess-29"}, "thread": {"id": 16272, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:29:52.701546+02:00", "timestamp": 1754051392.701546}}}
{"text": "2025-08-01 14:29:52.950 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.988371", "seconds": 0.988371}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 1980, "name": "SpawnProcess-29"}, "thread": {"id": 16272, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:29:52.950440+02:00", "timestamp": 1754051392.95044}}}
{"text": "2025-08-01 14:29:52.951 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.988978", "seconds": 0.988978}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 1980, "name": "SpawnProcess-29"}, "thread": {"id": 16272, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:29:52.951047+02:00", "timestamp": 1754051392.951047}}}
{"text": "2025-08-01 14:30:20.524 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:00:28.562345", "seconds": 28.562345}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 1980, "name": "SpawnProcess-29"}, "thread": {"id": 16272, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:30:20.524414+02:00", "timestamp": 1754051420.524414}}}
{"text": "2025-08-01 14:30:23.180 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.648868", "seconds": 0.648868}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 5592, "name": "SpawnProcess-30"}, "thread": {"id": 14568, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:30:23.180657+02:00", "timestamp": 1754051423.180657}}}
{"text": "2025-08-01 14:30:23.196 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.665067", "seconds": 0.665067}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 5592, "name": "SpawnProcess-30"}, "thread": {"id": 14568, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:30:23.196856+02:00", "timestamp": 1754051423.196856}}}
{"text": "2025-08-01 14:30:23.197 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.665575", "seconds": 0.665575}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 5592, "name": "SpawnProcess-30"}, "thread": {"id": 14568, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:30:23.197364+02:00", "timestamp": 1754051423.197364}}}
{"text": "2025-08-01 14:30:23.429 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.898028", "seconds": 0.898028}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 5592, "name": "SpawnProcess-30"}, "thread": {"id": 14568, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:30:23.429817+02:00", "timestamp": 1754051423.429817}}}
{"text": "2025-08-01 14:30:23.430 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.898637", "seconds": 0.898637}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 5592, "name": "SpawnProcess-30"}, "thread": {"id": 14568, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:30:23.430426+02:00", "timestamp": 1754051423.430426}}}
{"text": "2025-08-01 14:30:37.017 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:00:14.486059", "seconds": 14.486059}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 5592, "name": "SpawnProcess-30"}, "thread": {"id": 14568, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:30:37.017848+02:00", "timestamp": 1754051437.017848}}}
{"text": "2025-08-01 14:30:40.019 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.661715", "seconds": 0.661715}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 7648, "name": "SpawnProcess-32"}, "thread": {"id": 12292, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:30:40.019294+02:00", "timestamp": 1754051440.019294}}}
{"text": "2025-08-01 14:30:40.033 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.676138", "seconds": 0.676138}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 7648, "name": "SpawnProcess-32"}, "thread": {"id": 12292, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:30:40.033717+02:00", "timestamp": 1754051440.033717}}}
{"text": "2025-08-01 14:30:40.034 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.676677", "seconds": 0.676677}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 7648, "name": "SpawnProcess-32"}, "thread": {"id": 12292, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:30:40.034256+02:00", "timestamp": 1754051440.034256}}}
{"text": "2025-08-01 14:30:40.215 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.858245", "seconds": 0.858245}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 7648, "name": "SpawnProcess-32"}, "thread": {"id": 12292, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:30:40.215824+02:00", "timestamp": 1754051440.215824}}}
{"text": "2025-08-01 14:30:40.216 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.858684", "seconds": 0.858684}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 7648, "name": "SpawnProcess-32"}, "thread": {"id": 12292, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:30:40.216263+02:00", "timestamp": 1754051440.216263}}}
{"text": "2025-08-01 14:31:42.698 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:01:03.341410", "seconds": 63.34141}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 7648, "name": "SpawnProcess-32"}, "thread": {"id": 12292, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:31:42.698989+02:00", "timestamp": 1754051502.698989}}}
{"text": "2025-08-01 14:31:45.342 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.669313", "seconds": 0.669313}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 7384, "name": "SpawnProcess-33"}, "thread": {"id": 13232, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:31:45.342806+02:00", "timestamp": 1754051505.342806}}}
{"text": "2025-08-01 14:31:45.357 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.683951", "seconds": 0.683951}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 7384, "name": "SpawnProcess-33"}, "thread": {"id": 13232, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:31:45.357444+02:00", "timestamp": 1754051505.357444}}}
{"text": "2025-08-01 14:31:45.358 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.684568", "seconds": 0.684568}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 7384, "name": "SpawnProcess-33"}, "thread": {"id": 13232, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:31:45.358061+02:00", "timestamp": 1754051505.358061}}}
{"text": "2025-08-01 14:31:45.545 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.872406", "seconds": 0.872406}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 7384, "name": "SpawnProcess-33"}, "thread": {"id": 13232, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:31:45.545899+02:00", "timestamp": 1754051505.545899}}}
{"text": "2025-08-01 14:31:45.546 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.872917", "seconds": 0.872917}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 7384, "name": "SpawnProcess-33"}, "thread": {"id": 13232, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:31:45.546410+02:00", "timestamp": 1754051505.54641}}}
{"text": "2025-08-01 14:32:16.493 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:00:31.820211", "seconds": 31.820211}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 7384, "name": "SpawnProcess-33"}, "thread": {"id": 13232, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:32:16.493704+02:00", "timestamp": 1754051536.493704}}}
{"text": "2025-08-01 14:32:19.366 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.717968", "seconds": 0.717968}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 10432, "name": "SpawnProcess-34"}, "thread": {"id": 12560, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:32:19.366368+02:00", "timestamp": 1754051539.366368}}}
{"text": "2025-08-01 14:32:19.379 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.731531", "seconds": 0.731531}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 10432, "name": "SpawnProcess-34"}, "thread": {"id": 12560, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:32:19.379931+02:00", "timestamp": 1754051539.379931}}}
{"text": "2025-08-01 14:32:19.380 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.732210", "seconds": 0.73221}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 10432, "name": "SpawnProcess-34"}, "thread": {"id": 12560, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:32:19.380610+02:00", "timestamp": 1754051539.38061}}}
{"text": "2025-08-01 14:32:19.565 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:00.916654", "seconds": 0.916654}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 10432, "name": "SpawnProcess-34"}, "thread": {"id": 12560, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:32:19.565054+02:00", "timestamp": 1754051539.565054}}}
{"text": "2025-08-01 14:32:19.566 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:00.917619", "seconds": 0.917619}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 10432, "name": "SpawnProcess-34"}, "thread": {"id": 12560, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:32:19.566019+02:00", "timestamp": 1754051539.566019}}}
{"text": "2025-08-01 14:34:34.276 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:02:15.627846", "seconds": 135.627846}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 10432, "name": "SpawnProcess-34"}, "thread": {"id": 12560, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:34:34.276246+02:00", "timestamp": 1754051674.276246}}}
{"text": "2025-08-01 14:34:37.222 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.767494", "seconds": 0.767494}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:34:37.222367+02:00", "timestamp": 1754051677.222367}}}
{"text": "2025-08-01 14:34:37.236 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.781672", "seconds": 0.781672}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:34:37.236545+02:00", "timestamp": 1754051677.236545}}}
{"text": "2025-08-01 14:34:37.236 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.782092", "seconds": 0.782092}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:34:37.236965+02:00", "timestamp": 1754051677.236965}}}
{"text": "2025-08-01 14:34:37.771 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:01.316755", "seconds": 1.316755}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:34:37.771628+02:00", "timestamp": 1754051677.771628}}}
{"text": "2025-08-01 14:34:37.772 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:01.317362", "seconds": 1.317362}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:34:37.772235+02:00", "timestamp": 1754051677.772235}}}
{"text": "2025-08-01 14:36:06.427 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [4792acfb] OPTIONS /api/v1/optimisation/optimisation - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:29.972977", "seconds": 89.972977}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [4792acfb] OPTIONS /api/v1/optimisation/optimisation - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:06.427850+02:00", "timestamp": 1754051766.42785}}}
{"text": "2025-08-01 14:36:06.428 | INFO     | app.main:request_tracking_middleware:116 - ✅ [4792acfb] OPTIONS /api/v1/optimisation/optimisation - 200 - 1.1ms\n", "record": {"elapsed": {"repr": "0:01:29.974089", "seconds": 89.974089}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [4792acfb] OPTIONS /api/v1/optimisation/optimisation - 200 - 1.1ms", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:06.428962+02:00", "timestamp": 1754051766.428962}}}
{"text": "2025-08-01 14:36:06.435 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [c0f1b7ea] POST /api/v1/optimisation/optimisation - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:29.980753", "seconds": 89.980753}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [c0f1b7ea] POST /api/v1/optimisation/optimisation - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:06.435626+02:00", "timestamp": 1754051766.435626}}}
{"text": "2025-08-01 14:36:06.452 | INFO     | app.services.optimisation.optimisation_service:evaluate_group_optimization:22 - Démarrage evaluate_group_optimization\n", "record": {"elapsed": {"repr": "0:01:29.997322", "seconds": 89.997322}, "exception": null, "extra": {}, "file": {"name": "optimisation_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py"}, "function": "evaluate_group_optimization", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 22, "message": "Démarrage evaluate_group_optimization", "module": "optimisation_service", "name": "app.services.optimisation.optimisation_service", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:06.452195+02:00", "timestamp": 1754051766.452195}}}
{"text": "2025-08-01 14:36:06.452 | INFO     | app.services.optimisation.optimisation_service:evaluate_group_optimization:36 - cod_pro_list résolue: 1 éléments en 0.00s\n", "record": {"elapsed": {"repr": "0:01:29.998110", "seconds": 89.99811}, "exception": null, "extra": {}, "file": {"name": "optimisation_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py"}, "function": "evaluate_group_optimization", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 36, "message": "cod_pro_list résolue: 1 éléments en 0.00s", "module": "optimisation_service", "name": "app.services.optimisation.optimisation_service", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:06.452983+02:00", "timestamp": 1754051766.452983}}}
{"text": "2025-08-01 14:36:06.454 | ERROR    | app.main:request_tracking_middleware:129 - 💥 [c0f1b7ea] POST /api/v1/optimisation/optimisation - ERROR - 18.5ms - BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n", "record": {"elapsed": {"repr": "0:01:29.999229", "seconds": 89.999229}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 129, "message": "💥 [c0f1b7ea] POST /api/v1/optimisation/optimisation - ERROR - 18.5ms - BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:06.454102+02:00", "timestamp": 1754051766.454102}}}
{"text": "2025-08-01 14:36:06.935 | ERROR    | app.main:general_exception_handler:236 - 💥 [c0f1b7ea] Exception non gérée: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n", "record": {"elapsed": {"repr": "0:01:30.480321", "seconds": 90.480321}, "exception": null, "extra": {"extra": {"traceback": "  + Exception Group Traceback (most recent call last):\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 77, in collapse_excgroups\n  |     yield\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 183, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |                ~~~~~~~~~~~~~~~~~~~~~~~^^\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 772, in __aexit__\n  |     raise BaseExceptionGroup(\n  |         \"unhandled errors in a TaskGroup\", self._exceptions\n  |     ) from None\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 322, in security_headers_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 151, in custom_rate_limit_middleware\n    |     return await call_next(request)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 111, in request_tracking_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    |     await self.simple_response(scope, receive, send, request_headers=headers)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    |     await self.app(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    |     await responder(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    |     await super().__call__(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    |     await self.app(scope, receive, self.send_with_compression)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    |     await route.handle(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    |     await self.app(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |     ...<3 lines>...\n    |     )\n    |     ^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    |     return await dependant.call(**values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\optimisation\\optimisation_router.py\", line 16, in matrix_optimization_route\n    |     return await evaluate_group_optimization(payload, db)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py\", line 40, in evaluate_group_optimization\n    |     redis_key = optimisation_key(payload)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\cache\\cache_keys.py\", line 89, in optimisation_key\n    |     return _hash_if_needed(payload.model_dump(exclude_none=True, sort_keys=True), \"optimisation:group\")\n    |                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    | TypeError: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 322, in security_headers_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 151, in custom_rate_limit_middleware\n    return await call_next(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 111, in request_tracking_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\optimisation\\optimisation_router.py\", line 16, in matrix_optimization_route\n    return await evaluate_group_optimization(payload, db)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py\", line 40, in evaluate_group_optimization\n    redis_key = optimisation_key(payload)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\cache\\cache_keys.py\", line 89, in optimisation_key\n    return _hash_if_needed(payload.model_dump(exclude_none=True, sort_keys=True), \"optimisation:group\")\n                           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n"}}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "general_exception_handler", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 236, "message": "💥 [c0f1b7ea] Exception non gérée: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:06.935194+02:00", "timestamp": 1754051766.935194}}}
{"text": "2025-08-01 14:36:07.961 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [ed3637cc] OPTIONS /api/v1/optimisation/optimisation - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:31.506792", "seconds": 91.506792}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [ed3637cc] OPTIONS /api/v1/optimisation/optimisation - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:07.961665+02:00", "timestamp": 1754051767.961665}}}
{"text": "2025-08-01 14:36:07.964 | INFO     | app.main:request_tracking_middleware:116 - ✅ [ed3637cc] OPTIONS /api/v1/optimisation/optimisation - 200 - 2.4ms\n", "record": {"elapsed": {"repr": "0:01:31.509235", "seconds": 91.509235}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [ed3637cc] OPTIONS /api/v1/optimisation/optimisation - 200 - 2.4ms", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:07.964108+02:00", "timestamp": 1754051767.964108}}}
{"text": "2025-08-01 14:36:07.972 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [66ad2216] POST /api/v1/optimisation/optimisation - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:31.517349", "seconds": 91.517349}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [66ad2216] POST /api/v1/optimisation/optimisation - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:07.972222+02:00", "timestamp": 1754051767.972222}}}
{"text": "2025-08-01 14:36:07.978 | INFO     | app.services.optimisation.optimisation_service:evaluate_group_optimization:22 - Démarrage evaluate_group_optimization\n", "record": {"elapsed": {"repr": "0:01:31.523619", "seconds": 91.523619}, "exception": null, "extra": {}, "file": {"name": "optimisation_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py"}, "function": "evaluate_group_optimization", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 22, "message": "Démarrage evaluate_group_optimization", "module": "optimisation_service", "name": "app.services.optimisation.optimisation_service", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:07.978492+02:00", "timestamp": 1754051767.978492}}}
{"text": "2025-08-01 14:36:07.980 | INFO     | app.services.optimisation.optimisation_service:evaluate_group_optimization:36 - cod_pro_list résolue: 1 éléments en 0.00s\n", "record": {"elapsed": {"repr": "0:01:31.526074", "seconds": 91.526074}, "exception": null, "extra": {}, "file": {"name": "optimisation_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py"}, "function": "evaluate_group_optimization", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 36, "message": "cod_pro_list résolue: 1 éléments en 0.00s", "module": "optimisation_service", "name": "app.services.optimisation.optimisation_service", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:07.980947+02:00", "timestamp": 1754051767.980947}}}
{"text": "2025-08-01 14:36:07.981 | ERROR    | app.main:request_tracking_middleware:129 - 💥 [66ad2216] POST /api/v1/optimisation/optimisation - ERROR - 9.8ms - BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n", "record": {"elapsed": {"repr": "0:01:31.527124", "seconds": 91.527124}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 129, "message": "💥 [66ad2216] POST /api/v1/optimisation/optimisation - ERROR - 9.8ms - BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:07.981997+02:00", "timestamp": 1754051767.981997}}}
{"text": "2025-08-01 14:36:07.994 | ERROR    | app.main:general_exception_handler:236 - 💥 [66ad2216] Exception non gérée: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n", "record": {"elapsed": {"repr": "0:01:31.540082", "seconds": 91.540082}, "exception": null, "extra": {"extra": {"traceback": "  + Exception Group Traceback (most recent call last):\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 77, in collapse_excgroups\n  |     yield\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 183, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |                ~~~~~~~~~~~~~~~~~~~~~~~^^\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 772, in __aexit__\n  |     raise BaseExceptionGroup(\n  |         \"unhandled errors in a TaskGroup\", self._exceptions\n  |     ) from None\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 322, in security_headers_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 151, in custom_rate_limit_middleware\n    |     return await call_next(request)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 111, in request_tracking_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    |     await self.simple_response(scope, receive, send, request_headers=headers)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    |     await self.app(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    |     await responder(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    |     await super().__call__(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    |     await self.app(scope, receive, self.send_with_compression)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    |     await route.handle(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    |     await self.app(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |     ...<3 lines>...\n    |     )\n    |     ^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    |     return await dependant.call(**values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\optimisation\\optimisation_router.py\", line 16, in matrix_optimization_route\n    |     return await evaluate_group_optimization(payload, db)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py\", line 40, in evaluate_group_optimization\n    |     redis_key = optimisation_key(payload)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\cache\\cache_keys.py\", line 89, in optimisation_key\n    |     return _hash_if_needed(payload.model_dump(exclude_none=True, sort_keys=True), \"optimisation:group\")\n    |                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    | TypeError: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 322, in security_headers_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 151, in custom_rate_limit_middleware\n    return await call_next(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 111, in request_tracking_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\optimisation\\optimisation_router.py\", line 16, in matrix_optimization_route\n    return await evaluate_group_optimization(payload, db)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py\", line 40, in evaluate_group_optimization\n    redis_key = optimisation_key(payload)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\cache\\cache_keys.py\", line 89, in optimisation_key\n    return _hash_if_needed(payload.model_dump(exclude_none=True, sort_keys=True), \"optimisation:group\")\n                           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n"}}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "general_exception_handler", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 236, "message": "💥 [66ad2216] Exception non gérée: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:07.994955+02:00", "timestamp": 1754051767.994955}}}
{"text": "2025-08-01 14:36:08.257 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [82e108c7] OPTIONS /api/v1/optimisation/optimisation - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:31.802278", "seconds": 91.802278}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [82e108c7] OPTIONS /api/v1/optimisation/optimisation - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:08.257151+02:00", "timestamp": 1754051768.257151}}}
{"text": "2025-08-01 14:36:08.259 | INFO     | app.main:request_tracking_middleware:116 - ✅ [82e108c7] OPTIONS /api/v1/optimisation/optimisation - 200 - 2.3ms\n", "record": {"elapsed": {"repr": "0:01:31.804597", "seconds": 91.804597}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [82e108c7] OPTIONS /api/v1/optimisation/optimisation - 200 - 2.3ms", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:08.259470+02:00", "timestamp": 1754051768.25947}}}
{"text": "2025-08-01 14:36:08.266 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [c7d8c3ab] POST /api/v1/optimisation/optimisation - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:31.811248", "seconds": 91.811248}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [c7d8c3ab] POST /api/v1/optimisation/optimisation - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:08.266121+02:00", "timestamp": 1754051768.266121}}}
{"text": "2025-08-01 14:36:08.268 | INFO     | app.services.optimisation.optimisation_service:evaluate_group_optimization:22 - Démarrage evaluate_group_optimization\n", "record": {"elapsed": {"repr": "0:01:31.814077", "seconds": 91.814077}, "exception": null, "extra": {}, "file": {"name": "optimisation_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py"}, "function": "evaluate_group_optimization", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 22, "message": "Démarrage evaluate_group_optimization", "module": "optimisation_service", "name": "app.services.optimisation.optimisation_service", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:08.268950+02:00", "timestamp": 1754051768.26895}}}
{"text": "2025-08-01 14:36:08.269 | INFO     | app.services.optimisation.optimisation_service:evaluate_group_optimization:36 - cod_pro_list résolue: 1 éléments en 0.00s\n", "record": {"elapsed": {"repr": "0:01:31.814551", "seconds": 91.814551}, "exception": null, "extra": {}, "file": {"name": "optimisation_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py"}, "function": "evaluate_group_optimization", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 36, "message": "cod_pro_list résolue: 1 éléments en 0.00s", "module": "optimisation_service", "name": "app.services.optimisation.optimisation_service", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:08.269424+02:00", "timestamp": 1754051768.269424}}}
{"text": "2025-08-01 14:36:08.270 | ERROR    | app.main:request_tracking_middleware:129 - 💥 [c7d8c3ab] POST /api/v1/optimisation/optimisation - ERROR - 4.5ms - BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n", "record": {"elapsed": {"repr": "0:01:31.815738", "seconds": 91.815738}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 129, "message": "💥 [c7d8c3ab] POST /api/v1/optimisation/optimisation - ERROR - 4.5ms - BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:08.270611+02:00", "timestamp": 1754051768.270611}}}
{"text": "2025-08-01 14:36:08.300 | ERROR    | app.main:general_exception_handler:236 - 💥 [c7d8c3ab] Exception non gérée: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n", "record": {"elapsed": {"repr": "0:01:31.845528", "seconds": 91.845528}, "exception": null, "extra": {"extra": {"traceback": "  + Exception Group Traceback (most recent call last):\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 77, in collapse_excgroups\n  |     yield\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 183, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |                ~~~~~~~~~~~~~~~~~~~~~~~^^\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 772, in __aexit__\n  |     raise BaseExceptionGroup(\n  |         \"unhandled errors in a TaskGroup\", self._exceptions\n  |     ) from None\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 322, in security_headers_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 151, in custom_rate_limit_middleware\n    |     return await call_next(request)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 111, in request_tracking_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    |     await self.simple_response(scope, receive, send, request_headers=headers)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    |     await self.app(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    |     await responder(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    |     await super().__call__(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    |     await self.app(scope, receive, self.send_with_compression)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    |     await route.handle(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    |     await self.app(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |     ...<3 lines>...\n    |     )\n    |     ^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    |     return await dependant.call(**values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\optimisation\\optimisation_router.py\", line 16, in matrix_optimization_route\n    |     return await evaluate_group_optimization(payload, db)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py\", line 40, in evaluate_group_optimization\n    |     redis_key = optimisation_key(payload)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\cache\\cache_keys.py\", line 89, in optimisation_key\n    |     return _hash_if_needed(payload.model_dump(exclude_none=True, sort_keys=True), \"optimisation:group\")\n    |                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    | TypeError: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 322, in security_headers_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 151, in custom_rate_limit_middleware\n    return await call_next(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 111, in request_tracking_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\optimisation\\optimisation_router.py\", line 16, in matrix_optimization_route\n    return await evaluate_group_optimization(payload, db)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py\", line 40, in evaluate_group_optimization\n    redis_key = optimisation_key(payload)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\cache\\cache_keys.py\", line 89, in optimisation_key\n    return _hash_if_needed(payload.model_dump(exclude_none=True, sort_keys=True), \"optimisation:group\")\n                           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n"}}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "general_exception_handler", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 236, "message": "💥 [c7d8c3ab] Exception non gérée: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:08.300401+02:00", "timestamp": 1754051768.300401}}}
{"text": "2025-08-01 14:36:08.642 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [ba4b92b8] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:32.187539", "seconds": 92.187539}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [ba4b92b8] GET /api/v1/suggestions/refint-codpro - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:08.642412+02:00", "timestamp": 1754051768.642412}}}
{"text": "2025-08-01 14:36:08.897 | INFO     | app.main:request_tracking_middleware:116 - ✅ [ba4b92b8] GET /api/v1/suggestions/refint-codpro - 200 - 255.1ms\n", "record": {"elapsed": {"repr": "0:01:32.442681", "seconds": 92.442681}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [ba4b92b8] GET /api/v1/suggestions/refint-codpro - 200 - 255.1ms", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:08.897554+02:00", "timestamp": 1754051768.897554}}}
{"text": "2025-08-01 14:36:09.356 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [3a046113] OPTIONS /api/v1/optimisation/optimisation - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:32.901570", "seconds": 92.90157}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [3a046113] OPTIONS /api/v1/optimisation/optimisation - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:09.356443+02:00", "timestamp": 1754051769.356443}}}
{"text": "2025-08-01 14:36:09.357 | INFO     | app.main:request_tracking_middleware:116 - ✅ [3a046113] OPTIONS /api/v1/optimisation/optimisation - 200 - 1.2ms\n", "record": {"elapsed": {"repr": "0:01:32.902748", "seconds": 92.902748}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [3a046113] OPTIONS /api/v1/optimisation/optimisation - 200 - 1.2ms", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:09.357621+02:00", "timestamp": 1754051769.357621}}}
{"text": "2025-08-01 14:36:09.361 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [502ef0c7] POST /api/v1/optimisation/optimisation - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:32.906575", "seconds": 92.906575}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [502ef0c7] POST /api/v1/optimisation/optimisation - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:09.361448+02:00", "timestamp": 1754051769.361448}}}
{"text": "2025-08-01 14:36:09.363 | INFO     | app.services.optimisation.optimisation_service:evaluate_group_optimization:22 - Démarrage evaluate_group_optimization\n", "record": {"elapsed": {"repr": "0:01:32.908929", "seconds": 92.908929}, "exception": null, "extra": {}, "file": {"name": "optimisation_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py"}, "function": "evaluate_group_optimization", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 22, "message": "Démarrage evaluate_group_optimization", "module": "optimisation_service", "name": "app.services.optimisation.optimisation_service", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:09.363802+02:00", "timestamp": 1754051769.363802}}}
{"text": "2025-08-01 14:36:09.364 | INFO     | app.services.optimisation.optimisation_service:evaluate_group_optimization:36 - cod_pro_list résolue: 1 éléments en 0.00s\n", "record": {"elapsed": {"repr": "0:01:32.909284", "seconds": 92.909284}, "exception": null, "extra": {}, "file": {"name": "optimisation_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py"}, "function": "evaluate_group_optimization", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 36, "message": "cod_pro_list résolue: 1 éléments en 0.00s", "module": "optimisation_service", "name": "app.services.optimisation.optimisation_service", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:09.364157+02:00", "timestamp": 1754051769.364157}}}
{"text": "2025-08-01 14:36:09.364 | ERROR    | app.main:request_tracking_middleware:129 - 💥 [502ef0c7] POST /api/v1/optimisation/optimisation - ERROR - 3.5ms - BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n", "record": {"elapsed": {"repr": "0:01:32.910110", "seconds": 92.91011}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 129, "message": "💥 [502ef0c7] POST /api/v1/optimisation/optimisation - ERROR - 3.5ms - BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:09.364983+02:00", "timestamp": 1754051769.364983}}}
{"text": "2025-08-01 14:36:09.401 | ERROR    | app.main:general_exception_handler:236 - 💥 [502ef0c7] Exception non gérée: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n", "record": {"elapsed": {"repr": "0:01:32.946825", "seconds": 92.946825}, "exception": null, "extra": {"extra": {"traceback": "  + Exception Group Traceback (most recent call last):\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 77, in collapse_excgroups\n  |     yield\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 183, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |                ~~~~~~~~~~~~~~~~~~~~~~~^^\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 772, in __aexit__\n  |     raise BaseExceptionGroup(\n  |         \"unhandled errors in a TaskGroup\", self._exceptions\n  |     ) from None\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 322, in security_headers_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 151, in custom_rate_limit_middleware\n    |     return await call_next(request)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 111, in request_tracking_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    |     await self.simple_response(scope, receive, send, request_headers=headers)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    |     await self.app(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    |     await responder(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    |     await super().__call__(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    |     await self.app(scope, receive, self.send_with_compression)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    |     await route.handle(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    |     await self.app(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |     ...<3 lines>...\n    |     )\n    |     ^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    |     return await dependant.call(**values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\optimisation\\optimisation_router.py\", line 16, in matrix_optimization_route\n    |     return await evaluate_group_optimization(payload, db)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py\", line 40, in evaluate_group_optimization\n    |     redis_key = optimisation_key(payload)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\cache\\cache_keys.py\", line 89, in optimisation_key\n    |     return _hash_if_needed(payload.model_dump(exclude_none=True, sort_keys=True), \"optimisation:group\")\n    |                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    | TypeError: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 322, in security_headers_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 151, in custom_rate_limit_middleware\n    return await call_next(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 111, in request_tracking_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\optimisation\\optimisation_router.py\", line 16, in matrix_optimization_route\n    return await evaluate_group_optimization(payload, db)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py\", line 40, in evaluate_group_optimization\n    redis_key = optimisation_key(payload)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\cache\\cache_keys.py\", line 89, in optimisation_key\n    return _hash_if_needed(payload.model_dump(exclude_none=True, sort_keys=True), \"optimisation:group\")\n                           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n"}}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "general_exception_handler", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 236, "message": "💥 [502ef0c7] Exception non gérée: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:09.401698+02:00", "timestamp": 1754051769.401698}}}
{"text": "2025-08-01 14:36:11.417 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [b3843554] OPTIONS /api/v1/optimisation/optimisation - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:34.962575", "seconds": 94.962575}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [b3843554] OPTIONS /api/v1/optimisation/optimisation - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:11.417448+02:00", "timestamp": 1754051771.417448}}}
{"text": "2025-08-01 14:36:11.419 | INFO     | app.main:request_tracking_middleware:116 - ✅ [b3843554] OPTIONS /api/v1/optimisation/optimisation - 200 - 1.7ms\n", "record": {"elapsed": {"repr": "0:01:34.964288", "seconds": 94.964288}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 116, "message": "✅ [b3843554] OPTIONS /api/v1/optimisation/optimisation - 200 - 1.7ms", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:11.419161+02:00", "timestamp": 1754051771.419161}}}
{"text": "2025-08-01 14:36:11.422 | INFO     | app.main:request_tracking_middleware:105 - 🔵 [91563f12] POST /api/v1/optimisation/optimisation - Client: 127.0.0.1\n", "record": {"elapsed": {"repr": "0:01:34.967606", "seconds": 94.967606}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 105, "message": "🔵 [91563f12] POST /api/v1/optimisation/optimisation - Client: 127.0.0.1", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:11.422479+02:00", "timestamp": 1754051771.422479}}}
{"text": "2025-08-01 14:36:11.424 | INFO     | app.services.optimisation.optimisation_service:evaluate_group_optimization:22 - Démarrage evaluate_group_optimization\n", "record": {"elapsed": {"repr": "0:01:34.969929", "seconds": 94.969929}, "exception": null, "extra": {}, "file": {"name": "optimisation_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py"}, "function": "evaluate_group_optimization", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 22, "message": "Démarrage evaluate_group_optimization", "module": "optimisation_service", "name": "app.services.optimisation.optimisation_service", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:11.424802+02:00", "timestamp": 1754051771.424802}}}
{"text": "2025-08-01 14:36:11.425 | INFO     | app.services.optimisation.optimisation_service:evaluate_group_optimization:36 - cod_pro_list résolue: 1 éléments en 0.00s\n", "record": {"elapsed": {"repr": "0:01:34.970303", "seconds": 94.970303}, "exception": null, "extra": {}, "file": {"name": "optimisation_service.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py"}, "function": "evaluate_group_optimization", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 36, "message": "cod_pro_list résolue: 1 éléments en 0.00s", "module": "optimisation_service", "name": "app.services.optimisation.optimisation_service", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:11.425176+02:00", "timestamp": 1754051771.425176}}}
{"text": "2025-08-01 14:36:11.426 | ERROR    | app.main:request_tracking_middleware:129 - 💥 [91563f12] POST /api/v1/optimisation/optimisation - ERROR - 3.6ms - BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n", "record": {"elapsed": {"repr": "0:01:34.971170", "seconds": 94.97117}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "request_tracking_middleware", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 129, "message": "💥 [91563f12] POST /api/v1/optimisation/optimisation - ERROR - 3.6ms - BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:11.426043+02:00", "timestamp": 1754051771.426043}}}
{"text": "2025-08-01 14:36:11.438 | ERROR    | app.main:general_exception_handler:236 - 💥 [91563f12] Exception non gérée: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n", "record": {"elapsed": {"repr": "0:01:34.984101", "seconds": 94.984101}, "exception": null, "extra": {"extra": {"traceback": "  + Exception Group Traceback (most recent call last):\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 77, in collapse_excgroups\n  |     yield\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 183, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |                ~~~~~~~~~~~~~~~~~~~~~~~^^\n  |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 772, in __aexit__\n  |     raise BaseExceptionGroup(\n  |         \"unhandled errors in a TaskGroup\", self._exceptions\n  |     ) from None\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 322, in security_headers_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 151, in custom_rate_limit_middleware\n    |     return await call_next(request)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    |     with recv_stream, send_stream, collapse_excgroups():\n    |                                    ~~~~~~~~~~~~~~~~~~^^\n    |   File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    |     self.gen.throw(value)\n    |     ~~~~~~~~~~~~~~^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 111, in request_tracking_middleware\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    |     raise app_exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    |     await self.simple_response(scope, receive, send, request_headers=headers)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    |     await self.app(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    |     await responder(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    |     await super().__call__(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    |     await self.app(scope, receive, self.send_with_compression)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    |     await route.handle(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    |     await self.app(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    |     raise exc\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    |     raw_response = await run_endpoint_function(\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |     ...<3 lines>...\n    |     )\n    |     ^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    |     return await dependant.call(**values)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\optimisation\\optimisation_router.py\", line 16, in matrix_optimization_route\n    |     return await evaluate_group_optimization(payload, db)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py\", line 40, in evaluate_group_optimization\n    |     redis_key = optimisation_key(payload)\n    |   File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\cache\\cache_keys.py\", line 89, in optimisation_key\n    |     return _hash_if_needed(payload.model_dump(exclude_none=True, sort_keys=True), \"optimisation:group\")\n    |                            ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    | TypeError: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 164, in __call__\n    await self.app(scope, receive, _send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 322, in security_headers_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 151, in custom_rate_limit_middleware\n    return await call_next(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 182, in __call__\n    with recv_stream, send_stream, collapse_excgroups():\n                                   ~~~~~~~~~~~~~~~~~~^^\n  File \"C:\\Program Files (x86)\\Python\\Python313\\Lib\\contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 184, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py\", line 111, in request_tracking_middleware\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 159, in call_next\n    raise app_exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 93, in __call__\n    await self.simple_response(scope, receive, send, request_headers=headers)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 144, in simple_response\n    await self.app(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 29, in __call__\n    await responder(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 130, in __call__\n    await super().__call__(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\gzip.py\", line 46, in __call__\n    await self.app(scope, receive, self.send_with_compression)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\starlette\\routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\venv\\Lib\\site-packages\\fastapi\\routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\routers\\optimisation\\optimisation_router.py\", line 16, in matrix_optimization_route\n    return await evaluate_group_optimization(payload, db)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\services\\optimisation\\optimisation_service.py\", line 40, in evaluate_group_optimization\n    redis_key = optimisation_key(payload)\n  File \"D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\cache\\cache_keys.py\", line 89, in optimisation_key\n    return _hash_if_needed(payload.model_dump(exclude_none=True, sort_keys=True), \"optimisation:group\")\n                           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'\n"}}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "general_exception_handler", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 236, "message": "💥 [91563f12] Exception non gérée: BaseModel.model_dump() got an unexpected keyword argument 'sort_keys'", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:36:11.438974+02:00", "timestamp": 1754051771.438974}}}
{"text": "2025-08-01 14:37:42.680 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:03:06.225182", "seconds": 186.225182}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 5864, "name": "SpawnProcess-35"}, "thread": {"id": 6808, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:37:42.680055+02:00", "timestamp": 1754051862.680055}}}
{"text": "2025-08-01 14:37:46.206 | INFO     | app.main:lifespan:38 - 🚀 Initialisation backend CBM_GRC_Matcher...\n", "record": {"elapsed": {"repr": "0:00:00.795368", "seconds": 0.795368}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "🚀 Initialisation backend CBM_GRC_Matcher...", "module": "main", "name": "app.main", "process": {"id": 18448, "name": "SpawnProcess-36"}, "thread": {"id": 5004, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:37:46.206604+02:00", "timestamp": 1754051866.206604}}}
{"text": "2025-08-01 14:37:46.224 | INFO     | app.common.redis_client:test_connection:19 - ✅ Redis OK\n", "record": {"elapsed": {"repr": "0:00:00.813312", "seconds": 0.813312}, "exception": null, "extra": {}, "file": {"name": "redis_client.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\common\\redis_client.py"}, "function": "test_connection", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 19, "message": "✅ Redis OK", "module": "redis_client", "name": "app.common.redis_client", "process": {"id": 18448, "name": "SpawnProcess-36"}, "thread": {"id": 5004, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:37:46.224548+02:00", "timestamp": 1754051866.224548}}}
{"text": "2025-08-01 14:37:46.225 | INFO     | app.main:lifespan:47 - ✅ Redis connecté\n", "record": {"elapsed": {"repr": "0:00:00.814105", "seconds": 0.814105}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "✅ Redis connecté", "module": "main", "name": "app.main", "process": {"id": 18448, "name": "SpawnProcess-36"}, "thread": {"id": 5004, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:37:46.225341+02:00", "timestamp": 1754051866.225341}}}
{"text": "2025-08-01 14:37:46.476 | INFO     | app.main:lifespan:54 - ✅ Base de données connectée\n", "record": {"elapsed": {"repr": "0:00:01.065352", "seconds": 1.065352}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 54, "message": "✅ Base de données connectée", "module": "main", "name": "app.main", "process": {"id": 18448, "name": "SpawnProcess-36"}, "thread": {"id": 5004, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:37:46.476588+02:00", "timestamp": 1754051866.476588}}}
{"text": "2025-08-01 14:37:46.477 | INFO     | app.main:lifespan:63 - ✅ Backend prêt - Tous les services sont opérationnels\n", "record": {"elapsed": {"repr": "0:00:01.066015", "seconds": 1.066015}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 63, "message": "✅ Backend prêt - Tous les services sont opérationnels", "module": "main", "name": "app.main", "process": {"id": 18448, "name": "SpawnProcess-36"}, "thread": {"id": 5004, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:37:46.477251+02:00", "timestamp": 1754051866.477251}}}
{"text": "2025-08-01 14:38:38.720 | INFO     | app.main:lifespan:67 - 🛑 Arrêt du backend CBM_GRC_Matcher\n", "record": {"elapsed": {"repr": "0:00:53.308953", "seconds": 53.308953}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "D:\\Projet\\CBM_GRC_Matcher\\backend\\app\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 67, "message": "🛑 Arrêt du backend CBM_GRC_Matcher", "module": "main", "name": "app.main", "process": {"id": 18448, "name": "SpawnProcess-36"}, "thread": {"id": 5004, "name": "MainThread"}, "time": {"repr": "2025-08-01 14:38:38.720189+02:00", "timestamp": 1754051918.720189}}}
